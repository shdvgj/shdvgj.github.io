<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shdvgj.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="Java8Lambda 表达式让 java 也能支持简单的函数式编程 123456789101112131415161718192021222324&#x2F;** Runnable 接口 **&#x2F;new Thread(new Runnable() &amp;#123;            @Override            public void run() &amp;#123;                Sy">
<meta property="og:type" content="article">
<meta property="og:title" content="Java新特性总结">
<meta property="og:url" content="http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Ricky的个人博客">
<meta property="og:description" content="Java8Lambda 表达式让 java 也能支持简单的函数式编程 123456789101112131415161718192021222324&#x2F;** Runnable 接口 **&#x2F;new Thread(new Runnable() &amp;#123;            @Override            public void run() &amp;#123;                Sy">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/java-new1.jpg">
<meta property="article:published_time" content="2022-06-20T06:09:18.000Z">
<meta property="article:modified_time" content="2023-03-16T08:44:04.632Z">
<meta property="article:author" content="Ricky">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/java-new1.jpg">


<link rel="canonical" href="http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/","path":"2022/06/20/blog/Java新特性总结/","title":"Java新特性总结"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Java新特性总结 | Ricky的个人博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Ricky的个人博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">15</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">48</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Java8"><span class="nav-text">Java8</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">Lambda 表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream"><span class="nav-text">Stream</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">Optional表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interface%E6%96%B0%E5%A2%9E%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8default-%E6%88%96-static%E4%BF%AE%E9%A5%B0"><span class="nav-text">Interface新增默认方法，可以用default 或 static修饰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Date-Time-API"><span class="nav-text">Date-Time API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java9"><span class="nav-text">Java9</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95"><span class="nav-text">接口私有方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JShell"><span class="nav-text">JShell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E5%90%88%E6%96%B0%E5%A2%9Eof-%E6%96%B9%E6%B3%95%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88%E5%AF%B9%E8%B1%A1"><span class="nav-text">集合新增of() 方法，用于快速创建集合对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String%E7%94%B1char-%E6%95%B0%E7%BB%84%E6%94%B9%E4%B8%BAbyte-%E6%95%B0%E7%BB%84%E5%AD%98%E5%82%A8"><span class="nav-text">String由char[]数组改为byte[]数组存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%B3%BB%E7%BB%9F"><span class="nav-text">模块化系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E5%AD%B5%E5%8C%96%E5%99%A8%E6%A8%A1%E5%9D%97jdk-incubator"><span class="nav-text">引入孵化器模块jdk.incubator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#G1-%E6%88%90%E4%B8%BA%E9%BB%98%E8%AE%A4%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="nav-text">G1 成为默认垃圾回收器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-amp-Optional-%E5%A2%9E%E5%BC%BA"><span class="nav-text">Stream &amp; Optional 增强</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8BAPI"><span class="nav-text">进程API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java10"><span class="nav-text">Java10</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD-var"><span class="nav-text">局部变量类型推断(var)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8B%A5%E5%B9%B2%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="nav-text">若干性能的提升</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#G1-%E5%B9%B6%E8%A1%8C-Full-GC"><span class="nav-text">G1 并行 Full GC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Application-Class-Data-Sharing-%E7%A8%8B%E5%BA%8Fclass%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="nav-text">Application Class-Data Sharing 程序class数据文件共享</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Experimental-Java-Based-JIT-Compiler-%E5%AE%9E%E9%AA%8C%E6%80%A7%E7%9A%84%E5%9F%BA%E4%BA%8E-Java-%E7%9A%84-JIT-%E7%BC%96%E8%AF%91%E5%99%A8"><span class="nav-text">Experimental Java-Based JIT Compiler 实验性的基于 Java 的 JIT 编译器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88"><span class="nav-text">不可变集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional%E5%A2%9E%E5%8A%A0orElseThrow-%E6%96%B9%E6%B3%95"><span class="nav-text">Optional增加orElseThrow() 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E6%84%8F%E8%AF%86"><span class="nav-text">容器意识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E8%AF%81%E4%B9%A6"><span class="nav-text">根证书</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC"><span class="nav-text">基于时间发布版本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java11"><span class="nav-text">Java11</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E7%9A%84String%E6%96%B9%E6%B3%95"><span class="nav-text">新的String方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E7%9A%84Files%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95"><span class="nav-text">新的Files操作方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E5%90%88%E5%88%B0%E6%95%B0%E7%BB%84"><span class="nav-text">集合到数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Not-Predicate-Method"><span class="nav-text">The Not Predicate Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lamda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E8%AF%AD%E6%B3%95"><span class="nav-text">Lamda表达式中的本地变量语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-Client"><span class="nav-text">HTTP Client</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E7%B1%BB%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="nav-text">嵌套类访问控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8Cjava%E6%96%87%E4%BB%B6"><span class="nav-text">可直接运行java文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dynamic-Class-File-Constants"><span class="nav-text">Dynamic Class-File Constants</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E4%B8%80%E4%B8%AA%E6%B6%88%E6%9E%81%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8-Epsilon"><span class="nav-text">新增一个消极的垃圾收集器 Epsilon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A3%9E%E8%A1%8C%E8%AE%B0%E5%BD%95%E5%99%A8"><span class="nav-text">飞行记录器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java12"><span class="nav-text">Java12</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#String%E5%A2%9E%E5%8A%A0%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95indent-%E5%92%8C-transform"><span class="nav-text">String增加两个方法indent() 和 transform()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File%E5%A2%9E%E5%8A%A0%E6%96%87%E4%BB%B6%E5%AF%B9%E6%AF%94%E6%96%B9%E6%B3%95"><span class="nav-text">File增加文件对比方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Collector%E6%96%B0%E5%A2%9Eteeing%E6%96%B9%E6%B3%95"><span class="nav-text">Collector新增teeing方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-text">数字格式化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E8%A7%88%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-text">预览新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Switch-%E8%AF%AD%E6%B3%95%E5%A2%9E%E5%BC%BA"><span class="nav-text">Switch 语法增强</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#instanceof%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D"><span class="nav-text">instanceof的类型匹配</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="nav-text">JVM的修改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Shenandoah-%E4%B8%80%E4%B8%AA%E8%87%B4%E5%8A%9B%E4%BA%8E%E6%9A%82%E5%81%9C%E6%97%B6%E9%97%B4%E7%9F%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8"><span class="nav-text">Shenandoah 一个致力于暂停时间短的垃圾收集器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Microbenchmark-Suite-%E5%BE%AE%E5%9F%BA%E5%87%86%E5%A5%97%E4%BB%B6"><span class="nav-text">Microbenchmark Suite 微基准套件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CDS-%E6%96%87%E6%A1%A3%E5%8F%98%E4%B8%BA%E9%BB%98%E8%AE%A4%E5%8A%9F%E8%83%BD"><span class="nav-text">CDS 文档变为默认功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java13"><span class="nav-text">Java13</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7%E9%A2%84%E8%A7%88%EF%BC%8C%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%BC%80%E5%90%AF"><span class="nav-text">新特性预览，需要手动开启</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Switch%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%A2%9E%E5%BC%BA%EF%BC%8C%E6%96%B0%E5%A2%9Eyield%E8%AF%AD%E6%B3%95%E7%94%A8%E4%BA%8E%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">Switch表达式增强，新增yield语法用于返回值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E6%96%87%E6%9C%AC%E5%9D%97"><span class="nav-text">多行文本块</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81CDS%E5%BD%92%E6%A1%A3"><span class="nav-text">动态CDS归档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZGC%E9%87%8A%E6%94%BE%E6%9C%AA%E4%BD%BF%E7%94%A8%E5%86%85%E5%AD%98"><span class="nav-text">ZGC释放未使用内存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-API%E9%87%8D%E6%9E%84"><span class="nav-text">Socket API重构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%9B%B4%E6%94%B9"><span class="nav-text">其他更改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java14"><span class="nav-text">Java14</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Switch%E6%96%B0%E8%AF%AD%E6%B3%95%E5%92%8C%E6%96%87%E6%9C%AC%E5%9D%97%E8%AF%AD%E6%B3%95%E5%AE%9E%E8%A3%85"><span class="nav-text">Switch新语法和文本块语法实装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Records-%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%88%E9%A2%84%E8%A7%88%E7%89%B9%E6%80%A7%EF%BC%89"><span class="nav-text">Records 关键字（预览特性）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NPE-%E6%8A%A5%E9%94%99%E5%A2%9E%E5%BC%BA%EF%BC%8C%E7%8E%B0%E5%9C%A8%E4%BC%9A%E5%87%86%E7%A1%AE%E6%8F%90%E7%A4%BA%E6%8A%A5%E9%94%99%E5%9C%A8%E5%93%AA%E4%B8%80%E8%A1%8C%E4%BB%A5%E5%8F%8A%E5%93%AA%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E4%B8%BA%E7%A9%BA%E3%80%82"><span class="nav-text">NPE 报错增强，现在会准确提示报错在哪一行以及哪一个对象为空。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%B5%E5%8C%96%E7%89%B9%E6%80%A7%EF%BC%8C%E8%BF%99%E4%BA%9B%E7%89%B9%E6%80%A7%E6%94%BE%E5%9C%A8%E6%A8%A1%E5%9D%97jdk-incubator-%E4%B8%AD"><span class="nav-text">孵化特性，这些特性放在模块jdk.incubator.中</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E5%A4%96%E9%83%A8%E5%86%85%E5%AD%98%E7%9A%84API"><span class="nav-text">访问外部内存的API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7"><span class="nav-text">打包工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZGC%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E5%9C%A8Windows%E5%92%8CMacOS%E4%B8%8A%E4%BD%BF%E7%94%A8-%E5%AE%9E%E9%AA%8C%E7%89%B9%E6%80%A7"><span class="nav-text">ZGC现在可以在Windows和MacOS上使用-实验特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BAG1-%E5%A2%9E%E5%8A%A0-NUMA-%E5%86%85%E5%AD%98%E6%94%B6%E9%9B%86%E6%9C%BA%E5%88%B6"><span class="nav-text">为G1 增加 NUMA 内存收集机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JFR-%E4%BA%8B%E4%BB%B6%E6%B5%81%EF%BC%8C%E5%A2%9E%E5%BC%BA%E4%BA%86JFR%E7%9A%84%E7%9B%91%E6%8E%A7%E8%83%BD%E5%8A%9B%EF%BC%8C%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%B6%88%E8%B4%B9%E8%80%85%E7%9A%84%E6%96%B9%E5%BC%8F%E7%9B%B4%E6%8E%A5%E8%8E%B7%E5%8F%96%E7%9B%91%E6%8E%A7%E7%BB%93%E6%9E%9C"><span class="nav-text">JFR 事件流，增强了JFR的监控能力，现在可以通过消费者的方式直接获取监控结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java15"><span class="nav-text">Java15</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#records%E5%85%B3%E9%94%AE%E5%AD%97%E5%AE%9E%E8%A3%85"><span class="nav-text">records关键字实装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sealed%EF%BC%8Cnon-sealed%EF%BC%8Cpermits%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">sealed，non-sealed，permits关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%90%E8%97%8F%E7%B1%BB"><span class="nav-text">隐藏类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="nav-text">模式匹配中的类型检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E5%86%85%E5%AD%98API"><span class="nav-text">外部内存API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZGC%E5%92%8CShenandoah%E6%88%90%E4%B8%BA%E5%8F%AF%E8%BF%9B%E8%A1%8C%E9%80%89%E6%8B%A9%E9%85%8D%E7%BD%AE%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%EF%BC%8CG1%E4%BE%9D%E7%84%B6%E6%98%AF%E9%BB%98%E8%AE%A4%E7%9A%84%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8"><span class="nav-text">ZGC和Shenandoah成为可进行选择配置的垃圾收集器，G1依然是默认的垃圾收集器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java15%E4%B8%AD%E7%A7%BB%E9%99%A4%E5%81%8F%E5%90%91%E9%94%81%EF%BC%8CRMI%EF%BC%8CSolaris-SPARC"><span class="nav-text">Java15中移除偏向锁，RMI，Solaris&#x2F;SPARC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java16"><span class="nav-text">Java16</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E5%8F%8D%E5%B0%84%E6%8E%A5%E5%8F%A3%E7%9A%84%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95"><span class="nav-text">动态代理现在可以反射接口的默认方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-text">日期格式的支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-%E7%B1%BB%E5%A2%9E%E5%8A%A0toList%E6%96%B9%E6%B3%95"><span class="nav-text">Stream 类增加toList方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vector-API-Incubator"><span class="nav-text">Vector API Incubator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Records%E5%85%B3%E9%94%AE%E5%AD%97%E5%8A%9F%E8%83%BD%E5%A2%9E%E5%BC%BA"><span class="nav-text">Records关键字功能增强</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#instanceof%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%92%8CSealed%E5%85%B3%E9%94%AE%E5%AD%97%E5%AE%9E%E8%A3%85"><span class="nav-text">instanceof模式匹配和Sealed关键字实装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java17"><span class="nav-text">Java17</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B%E8%AE%A1%E7%AE%97%E5%B0%86%E4%BF%9D%E8%AF%81%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B9%B3%E5%8F%B0%E4%BF%9D%E6%8C%81%E4%B8%A5%E6%A0%BC%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="nav-text">浮点型计算将保证在不同的平台保持严格相同的结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90%E5%99%A8%E5%A2%9E%E5%BC%BA"><span class="nav-text">伪随机数生成器增强</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Applet-API-%E8%A2%AB%E7%A7%BB%E9%99%A4"><span class="nav-text">Applet API 被移除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9JDK%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB%E6%9B%B4%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%B0%81%E8%A3%85%EF%BC%8C%E6%AF%94%E5%A6%82sun-misc-Unsafe%EF%BC%8C%E5%B0%86%E4%BF%9D%E8%AF%81%E5%BC%80%E5%8F%91%E8%80%85%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E5%88%B0%E6%AD%A4%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="nav-text">对JDK的内部类更严格的封装，比如sun.misc.Unsafe，将保证开发者无法访问到此类方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="nav-text">switch中的模式匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RMI-%E5%8A%9F%E8%83%BD%E8%A2%AB%E7%A7%BB%E9%99%A4"><span class="nav-text">RMI 功能被移除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sealed%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">sealed关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4Ahead-Of-Time-AOT-%E7%BC%96%E8%AF%91-%E5%92%8C-Just-In-Time-JIT-%E7%BC%96%E8%AF%91%E6%96%B9%E5%BC%8F"><span class="nav-text">移除Ahead-Of-Time (AOT) 编译 和 Just-In-Time (JIT) 编译方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4-Security-Manager"><span class="nav-text">移除 Security Manager</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E6%96%B9%E6%B3%95%E5%92%8C%E5%A4%96%E9%83%A8%E5%86%85%E5%AD%98%E7%9A%84API%EF%BC%88%E5%AD%B5%E5%8C%96%E5%99%A8%E7%89%B9%E6%80%A7%EF%BC%89"><span class="nav-text">外部方法和外部内存的API（孵化器特性）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vector-API%EF%BC%88%E4%BA%8C%E6%AC%A1%E5%AD%B5%E5%8C%96%EF%BC%89"><span class="nav-text">Vector API（二次孵化）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-text">反序列化过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E4%B8%80%E4%B8%AA%E5%8D%8A%E5%B9%B4%E5%91%A8%E6%9C%9F-%E7%89%B9%E6%80%A7%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="nav-text">新增一个半年周期-特性的模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9ELTS%E6%A8%A1%E5%9D%97"><span class="nav-text">新增LTS模块</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ricky"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Ricky</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shdvgj" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shdvgj" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:linqianghuang@gmail.com" title="E-Mail → mailto:linqianghuang@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/RickyLoveCindy" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;RickyLoveCindy" rel="noopener" target="_blank"><i class="twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/xiaoqianglalala" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;xiaoqianglalala" rel="noopener" target="_blank"><i class="instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java新特性总结
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-20 14:09:18" itemprop="dateCreated datePublished" datetime="2022-06-20T14:09:18+08:00">2022-06-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-03-16 16:44:04" itemprop="dateModified" datetime="2023-03-16T16:44:04+08:00">2023-03-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="Java8"><a href="#Java8" class="headerlink" title="Java8"></a>Java8</h2><h3 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h3><p>让 java 也能支持简单的函数式编程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Runnable 接口 **/</span></span><br><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;The runable now is using!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">&#125;).start();</span><br><span class="line"><span class="comment">//用lambda</span></span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;It&#x27;s a lambda function!&quot;</span>)).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**Comparator 接口**/</span></span><br><span class="line">List&lt;Integer&gt; strings = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">Collections.sort(strings, <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> o1 - o2;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lambda</span></span><br><span class="line">Collections.sort(strings, (Integer o1, Integer o2) -&gt; o1 - o2);</span><br><span class="line"><span class="comment">//分解开</span></span><br><span class="line">Comparator&lt;Integer&gt; comperator = (Integer o1, Integer o2) -&gt; o1 - o2;</span><br><span class="line">Collections.sort(strings, comperator);</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><p>Stream依然不存储数据，不同的是它可以检索(Retrieve)和逻辑处理集合数据、包括筛选、排序、统计、计数等。<strong>可以想象成是 Sql 语句</strong>。</p>
<p>它的源数据可以是 Collection、Array 等。由于它的方法参数都是函数式接口类型，所以一般和 Lambda 配合使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  List&lt;String&gt; strings = Arrays.asList(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;def&quot;</span>, <span class="string">&quot;gkh&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line">    <span class="comment">//返回符合条件的stream</span></span><br><span class="line">    Stream&lt;String&gt; stringStream = strings.stream().filter(s -&gt; <span class="string">&quot;abc&quot;</span>.equals(s));</span><br><span class="line">    <span class="comment">//计算流符合条件的流的数量</span></span><br><span class="line">    <span class="keyword">long</span> count = stringStream.count();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//forEach遍历-&gt;打印元素</span></span><br><span class="line">    strings.stream().forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//limit 获取到1个元素的stream</span></span><br><span class="line">    Stream&lt;String&gt; limit = strings.stream().limit(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//toArray 比如我们想看这个limitStream里面是什么，比如转换成String[],比如循环</span></span><br><span class="line">    String[] array = limit.toArray(String[]::<span class="keyword">new</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//map 对每个元素进行操作返回新流</span></span><br><span class="line">    Stream&lt;String&gt; map = strings.stream().map(s -&gt; s + <span class="string">&quot;22&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//sorted 排序并打印</span></span><br><span class="line">    strings.stream().sorted().forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Collectors collect 把abc放入容器中</span></span><br><span class="line">    List&lt;String&gt; collect = strings.stream().filter(string -&gt; <span class="string">&quot;abc&quot;</span>.equals(string)).collect(Collectors.toList());</span><br><span class="line">    <span class="comment">//把list转为string，各元素用，号隔开</span></span><br><span class="line">    String mergedString = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.joining(<span class="string">&quot;,&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对数组的统计，比如用</span></span><br><span class="line">    List&lt;Integer&gt; number = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    IntSummaryStatistics statistics = number.stream().mapToInt((x) -&gt; x).summaryStatistics();</span><br><span class="line">    System.out.println(<span class="string">&quot;列表中最大的数 : &quot;</span>+statistics.getMax());</span><br><span class="line">    System.out.println(<span class="string">&quot;列表中最小的数 : &quot;</span>+statistics.getMin());</span><br><span class="line">    System.out.println(<span class="string">&quot;平均数 : &quot;</span>+statistics.getAverage());</span><br><span class="line">    System.out.println(<span class="string">&quot;所有数之和 : &quot;</span>+statistics.getSum());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//concat 合并流</span></span><br><span class="line">    List&lt;String&gt; strings2 = Arrays.asList(<span class="string">&quot;xyz&quot;</span>, <span class="string">&quot;jqx&quot;</span>);</span><br><span class="line">    Stream.concat(strings2.stream(),strings.stream()).count();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注意 一个Stream只能操作一次，不能断开，否则会报错。</span></span><br><span class="line">    Stream stream = strings.stream();</span><br><span class="line">    <span class="comment">//第一次使用</span></span><br><span class="line">    stream.limit(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">//第二次使用</span></span><br><span class="line">    stream.forEach(System.out::println);</span><br><span class="line">    <span class="comment">//报错 java.lang.IllegalStateException: stream has already been operated upon or closed</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//但是可以这样, 连续使用</span></span><br><span class="line">    stream.limit(<span class="number">2</span>).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Optional表达式"><a href="#Optional表达式" class="headerlink" title="Optional表达式"></a>Optional表达式</h3><p>主要用于解决NPE问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原来的方式</span></span><br><span class="line">Zoo zoo = getZoo();</span><br><span class="line"><span class="keyword">if</span>(zoo != <span class="keyword">null</span>)&#123;</span><br><span class="line">   Dog dog = zoo.getDog();</span><br><span class="line">   <span class="keyword">if</span>(dog != <span class="keyword">null</span>)&#123;</span><br><span class="line">      <span class="keyword">int</span> age = dog.getAge();</span><br><span class="line">      System.out.println(age);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Optional方式</span></span><br><span class="line">Optional.ofNullable(zoo).map(o -&gt; o.getDog()).map(d -&gt; d.getAge()).ifPresent(age -&gt;</span><br><span class="line">    System.out.println(age)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Interface新增默认方法，可以用default-或-static修饰"><a href="#Interface新增默认方法，可以用default-或-static修饰" class="headerlink" title="Interface新增默认方法，可以用default 或 static修饰"></a>Interface新增默认方法，可以用default 或 static修饰</h3><p>目的：避免接口新增方法时，所有实现的类也必须跟着修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">InterfaceNew</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;interface提供的方式实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sm2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;interface提供的方式实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">def</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;interface default方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">def2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;interface default2方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//须要实现类重写</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Date-Time-API"><a href="#Date-Time-API" class="headerlink" title="Date-Time API"></a>Date-Time API</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">newFormat</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//format yyyy-MM-dd</span></span><br><span class="line">    LocalDate date = LocalDate.now();</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;date format : %s&quot;</span>, date));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//format HH:mm:ss</span></span><br><span class="line">    LocalTime time = LocalTime.now().withNano(<span class="number">0</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;time format : %s&quot;</span>, time));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//format yyyy-MM-dd HH:mm:ss</span></span><br><span class="line">    LocalDateTime dateTime = LocalDateTime.now();</span><br><span class="line">    DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    String dateTimeStr = dateTime.format(dateTimeFormatter);</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;dateTime format : %s&quot;</span>, dateTimeStr));</span><br><span class="line">    </span><br><span class="line">    LocalDate date = LocalDate.of(<span class="number">2021</span>, <span class="number">1</span>, <span class="number">26</span>);</span><br><span class="line">    LocalDate.parse(<span class="string">&quot;2021-01-26&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    LocalDateTime dateTime = LocalDateTime.of(<span class="number">2021</span>, <span class="number">1</span>, <span class="number">26</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">22</span>);</span><br><span class="line">    LocalDateTime.parse(<span class="string">&quot;2021-01-26 12:12:22&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    LocalTime time = LocalTime.of(<span class="number">12</span>, <span class="number">12</span>, <span class="number">22</span>);</span><br><span class="line">    LocalTime.parse(<span class="string">&quot;12:12:22&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Java9"><a href="#Java9" class="headerlink" title="Java9"></a>Java9</h2><h3 id="接口私有方法"><a href="#接口私有方法" class="headerlink" title="接口私有方法"></a>接口私有方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">methodPrivate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JShell"><a href="#JShell" class="headerlink" title="JShell"></a>JShell</h3><p>JShell 是 Java 9 新增的一个实用工具。为 Java 提供了类似于 Python 的实时命令行交互工具。目前能想到的最大的作用<strong>就是可以用于验证一些代码中的小问题</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jshell &gt; System.out.print(&quot;HelloWorld&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="集合新增of-方法，用于快速创建集合对象"><a href="#集合新增of-方法，用于快速创建集合对象" class="headerlink" title="集合新增of() 方法，用于快速创建集合对象"></a>集合新增of() 方法，用于快速创建集合对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C++&quot;</span>);</span><br><span class="line">Set.of(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C++&quot;</span>);</span><br><span class="line">Map.of(<span class="string">&quot;Java&quot;</span>, <span class="number">1</span>, <span class="string">&quot;C++&quot;</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h3 id="String由char-数组改为byte-数组存储"><a href="#String由char-数组改为byte-数组存储" class="headerlink" title="String由char[]数组改为byte[]数组存储"></a>String由char[]数组改为byte[]数组存储</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>,<span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;</span><br><span class="line">    <span class="comment">// @Stable 注解表示变量最多被修改一次，称为“稳定的”。</span></span><br><span class="line">    <span class="meta">@Stable</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="模块化系统"><a href="#模块化系统" class="headerlink" title="模块化系统"></a>模块化系统</h3><p>可以看成是大于package小于jar的一种结构，用于代码之间更高效的调用。在每个模块中加入一个module-info.java文件，写入下列描述，用于声明暴露和依赖的模块。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> modular.demo.persistent &#123;</span><br><span class="line">    <span class="keyword">exports</span> com.hanmc.example.modulardemo.persistent.domain;</span><br><span class="line">    <span class="keyword">exports</span> com.hanmc.example.modulardemo.persistent.dao;</span><br><span class="line">​</span><br><span class="line">    <span class="comment">//声明需要依赖的模块</span></span><br><span class="line">    <span class="keyword">requires</span> modular.demo.common;</span><br><span class="line">    <span class="keyword">requires</span> mybatis.plus;</span><br><span class="line">    <span class="keyword">requires</span> mybatis.plus.core;</span><br><span class="line">    <span class="keyword">requires</span> mybatis.plus.annotation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>目录结构如下：<br><img src="/2022/06/20/blog/Java%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/java-new1.jpg"></p>
<h3 id="引入孵化器模块jdk-incubator"><a href="#引入孵化器模块jdk-incubator" class="headerlink" title="引入孵化器模块jdk.incubator"></a>引入孵化器模块jdk.incubator</h3><p>java9开始新特性不再是一定保留，而是会在版本中进行迭代，这些新特性就放在孵化器中，如果随着迭代得以保留就会从孵化器中移出成为正式的特性，不合适的就会直接移除。这大大增强了java新特性开发的灵活性。</p>
<h3 id="G1-成为默认垃圾回收器"><a href="#G1-成为默认垃圾回收器" class="headerlink" title="G1 成为默认垃圾回收器"></a>G1 成为默认垃圾回收器</h3><h3 id="Stream-amp-Optional-增强"><a href="#Stream-amp-Optional-增强" class="headerlink" title="Stream &amp; Optional 增强"></a>Stream &amp; Optional 增强</h3><h3 id="进程API"><a href="#进程API" class="headerlink" title="进程API"></a>进程API</h3><p>Java 9 增加了 java.lang.ProcessHandle 接口来实现对原生进程进行管理，尤其适合于管理长时间运行的进程。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前正在运行的 JVM 的进程</span></span><br><span class="line">ProcessHandle currentProcess = ProcessHandle.current();</span><br><span class="line"><span class="comment">// 输出进程的 id</span></span><br><span class="line">System.out.println(currentProcess.pid());</span><br><span class="line"><span class="comment">// 输出进程的信息</span></span><br><span class="line">System.out.println(currentProcess.info());</span><br></pre></td></tr></table></figure>

<h2 id="Java10"><a href="#Java10" class="headerlink" title="Java10"></a>Java10</h2><h3 id="局部变量类型推断-var"><a href="#局部变量类型推断-var" class="headerlink" title="局部变量类型推断(var)"></a>局部变量类型推断(var)</h3><p>var 并不会改变 Java 是一门静态类型语言的事实，编译器负责推断出类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> codefx = <span class="keyword">new</span> URL(<span class="string">&quot;https://mp.weixin.qq.com/&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">var</span> list = List.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line"><span class="keyword">var</span> p = Paths.of(<span class="string">&quot;src/test/java/Java9FeaturesTest.java&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> numbers = List.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> n : list)</span><br><span class="line">    System.out.print(n+ <span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count=<span class="keyword">null</span>; <span class="comment">//❌编译不通过，不能声明为 null</span></span><br><span class="line"><span class="keyword">var</span> r = () -&gt; Math.random();<span class="comment">//❌编译不通过,不能声明为 Lambda表达式</span></span><br><span class="line"><span class="keyword">var</span> array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;<span class="comment">//❌编译不通过,不能声明数组</span></span><br></pre></td></tr></table></figure>
<h3 id="若干性能的提升"><a href="#若干性能的提升" class="headerlink" title="若干性能的提升"></a>若干性能的提升</h3><h4 id="G1-并行-Full-GC"><a href="#G1-并行-Full-GC" class="headerlink" title="G1 并行 Full GC"></a>G1 并行 Full GC</h4><p>从java9的单线程标记-清除-压缩算法转为并行算法，从而有效的减少stop-the-world的时间</p>
<h4 id="Application-Class-Data-Sharing-程序class数据文件共享"><a href="#Application-Class-Data-Sharing-程序class数据文件共享" class="headerlink" title="Application Class-Data Sharing 程序class数据文件共享"></a><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-10-performance-improvements">Application Class-Data Sharing 程序class数据文件共享</a></h4><p>AppCDS原本是商业特性，现在免费开源了。<br>我的理解，简单来说是将类加载器中的类生成一份共享档案文件，从而在jvm启动时直接读取内存中的对应类，可以加快jvm的启动速度。</p>
<h4 id="Experimental-Java-Based-JIT-Compiler-实验性的基于-Java-的-JIT-编译器"><a href="#Experimental-Java-Based-JIT-Compiler-实验性的基于-Java-的-JIT-编译器" class="headerlink" title="Experimental Java-Based JIT Compiler 实验性的基于 Java 的 JIT 编译器"></a><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-10-performance-improvements#experimental-java-based-jit-compiler">Experimental Java-Based JIT Compiler 实验性的基于 Java 的 JIT 编译器</a></h4><p>Graal 是一种java编写的动态编译器，可实现更高的性能和拓展性。同时也是java9中介绍过的Ahead-of-Time（AOT）编译器的基础。<br>加入以下参数开启Graal虚拟机</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UnlockExperimentalVMOptions -XX:+UseJVMCICompiler</span><br></pre></td></tr></table></figure>


<h3 id="不可变集合"><a href="#不可变集合" class="headerlink" title="不可变集合"></a>不可变集合</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增copyOf，拷贝一个不可变的集合</span></span><br><span class="line"><span class="meta">@Test(expected = UnsupportedOperationException.class)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenModifyCopyOfList_thenThrowsException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; copyList = List.copyOf(someIntList);</span><br><span class="line">    copyList.add(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Collectors新增toUnmodifiableList方法将集合变为不可变</span></span><br><span class="line"><span class="meta">@Test(expected = UnsupportedOperationException.class)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenModifyToUnmodifiableList_thenThrowsException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; evenList = someIntList.stream()</span><br><span class="line">      .filter(i -&gt; i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">      .collect(Collectors.toUnmodifiableList());</span><br><span class="line">    evenList.add(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Optional增加orElseThrow-方法"><a href="#Optional增加orElseThrow-方法" class="headerlink" title="Optional增加orElseThrow() 方法"></a>Optional增加orElseThrow() 方法</h3><h3 id="容器意识"><a href="#容器意识" class="headerlink" title="容器意识"></a>容器意识</h3><p>现在jvm能够知道自己在容器中运行，增加了几种容器中的jvm参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-XX:-UseContainerSupport</span><br><span class="line">-XX:ActiveProcessorCount=count</span><br><span class="line">-XX:InitialRAMPercentage</span><br><span class="line">-XX:MaxRAMPercentage</span><br><span class="line">-XX:MinRAMPercentage</span><br></pre></td></tr></table></figure>

<h3 id="根证书"><a href="#根证书" class="headerlink" title="根证书"></a>根证书</h3><p>现在java的证书密钥库包含了一些根证书，可用于对若干安全协议建立可信的证书连接。此功能被oracle从商业特性改为开源特性。</p>
<h3 id="基于时间发布版本"><a href="#基于时间发布版本" class="headerlink" title="基于时间发布版本"></a>基于时间发布版本</h3><p>Java10开始，oracle开始周期性的发布新版本：<br>1.每六个月发布一个java新版本。<br>2.功能性的发布只会支持6个月。<br>3.长期支持的版本会标记为LTS。该版本会支持3年。<br>4.java版本号现在会包含一个时间标示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">openjdk version <span class="string">&quot;10&quot;</span> <span class="number">2018</span>-<span class="number">03</span>-<span class="number">20</span></span><br><span class="line">OpenJDK Runtime Environment <span class="number">18.3</span> (build <span class="number">10</span>+<span class="number">46</span>)</span><br><span class="line">OpenJDK <span class="number">64</span>-Bit Server VM <span class="number">18.3</span> (build <span class="number">10</span>+<span class="number">46</span>, mixed mode)</span><br></pre></td></tr></table></figure>

<h2 id="Java11"><a href="#Java11" class="headerlink" title="Java11"></a>Java11</h2><p>Java11是Java8之后第一个长期支持的版本（LTS）。同时Oracle不再提供免费的Oracle JDK版本，但是依然对免费的Open JDK提供支持。</p>
<h3 id="新的String方法"><a href="#新的String方法" class="headerlink" title="新的String方法"></a>新的String方法</h3><p>新增 isBlank, lines, strip, stripLeading, stripTrailing, and repeat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对于多行文本的操作</span></span><br><span class="line">String multilineString = <span class="string">&quot;Baeldung helps \n \n developers \n explore Java.&quot;</span>;</span><br><span class="line">List&lt;String&gt; lines = multilineString.lines()</span><br><span class="line">  .filter(line -&gt; !line.isBlank())</span><br><span class="line">  .map(String::strip)</span><br><span class="line">  .collect(Collectors.toList());</span><br><span class="line">assertThat(lines).containsExactly(<span class="string">&quot;Baeldung helps&quot;</span>, <span class="string">&quot;developers&quot;</span>, <span class="string">&quot;explore Java.&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="新的Files操作方法"><a href="#新的Files操作方法" class="headerlink" title="新的Files操作方法"></a>新的Files操作方法</h3><p>Files类新增writeString和readString静态方法，现在更容易从文件中操作String。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Path filePath = Files.writeString(Files.createTempFile(tempDir, <span class="string">&quot;demo&quot;</span>, <span class="string">&quot;.txt&quot;</span>), <span class="string">&quot;Sample text&quot;</span>);</span><br><span class="line">String fileContent = Files.readString(filePath);</span><br><span class="line">assertThat(fileContent).isEqualTo(<span class="string">&quot;Sample text&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="集合到数组"><a href="#集合到数组" class="headerlink" title="集合到数组"></a>集合到数组</h3><p>java.util.Collection接口新增默认方法toArray</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List sampleList = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>);</span><br><span class="line">String[] sampleArray = sampleList.toArray(String[]::<span class="keyword">new</span>);</span><br><span class="line">assertThat(sampleArray).containsExactly(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="The-Not-Predicate-Method"><a href="#The-Not-Predicate-Method" class="headerlink" title="The Not Predicate Method"></a>The Not Predicate Method</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; sampleList = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;\n \n&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">List withoutBlanks = sampleList.stream()</span><br><span class="line">  .filter(Predicate.not(String::isBlank))</span><br><span class="line">  .collect(Collectors.toList());</span><br><span class="line">assertThat(withoutBlanks).containsExactly(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Lamda表达式中的本地变量语法"><a href="#Lamda表达式中的本地变量语法" class="headerlink" title="Lamda表达式中的本地变量语法"></a>Lamda表达式中的本地变量语法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; sampleList = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>);</span><br><span class="line">String resultString = sampleList.stream()</span><br><span class="line">  .map((<span class="meta">@Nonnull</span> <span class="keyword">var</span> x) -&gt; x.toUpperCase())</span><br><span class="line">  .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br><span class="line">assertThat(resultString).isEqualTo(<span class="string">&quot;JAVA, KOTLIN&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="HTTP-Client"><a href="#HTTP-Client" class="headerlink" title="HTTP Client"></a>HTTP Client</h3><p>新的HTTP API全面提升了性能并且将HTTP的支持从HTTP/1.1提升到了HTTP/2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HttpClient httpClient = HttpClient.newBuilder()</span><br><span class="line">  .version(HttpClient.Version.HTTP_2)</span><br><span class="line">  .connectTimeout(Duration.ofSeconds(<span class="number">20</span>))</span><br><span class="line">  .build();</span><br><span class="line">HttpRequest httpRequest = HttpRequest.newBuilder()</span><br><span class="line">  .GET()</span><br><span class="line">  .uri(URI.create(<span class="string">&quot;http://localhost:&quot;</span> + port))</span><br><span class="line">  .build();</span><br><span class="line">HttpResponse httpResponse = httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">assertThat(httpResponse.body()).isEqualTo(<span class="string">&quot;Hello from the server!&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="嵌套类访问控制"><a href="#嵌套类访问控制" class="headerlink" title="嵌套类访问控制"></a><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-11-new-features#7-nest-based-access-control">嵌套类访问控制</a></h3><h3 id="可直接运行java文件"><a href="#可直接运行java文件" class="headerlink" title="可直接运行java文件"></a>可直接运行java文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ java HelloWorld.java</span><br><span class="line">Hello Java <span class="number">11</span>!</span><br></pre></td></tr></table></figure>

<h3 id="Dynamic-Class-File-Constants"><a href="#Dynamic-Class-File-Constants" class="headerlink" title="Dynamic Class-File Constants"></a>Dynamic Class-File Constants</h3><p>个人理解是动态常量池</p>
<h3 id="新增一个消极的垃圾收集器-Epsilon"><a href="#新增一个消极的垃圾收集器-Epsilon" class="headerlink" title="新增一个消极的垃圾收集器 Epsilon"></a>新增一个消极的垃圾收集器 Epsilon</h3><p>不会去进行GC，一般不用于正式的java项目，可用于测试和生命周期极短的项目。<br>启用方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC</span><br></pre></td></tr></table></figure>

<h3 id="飞行记录器"><a href="#飞行记录器" class="headerlink" title="飞行记录器"></a>飞行记录器</h3><p>Java Flight Recorder (JFR) 现在在OpenJDK开源，使用如下命令运行监控</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:StartFlightRecording=duration=120s,settings=profile,filename=java-demo-app.jfr</span><br></pre></td></tr></table></figure>
<p>会生成一个JFR文件，该文件要使用JDK Mission Control (JMC)进行分析。</p>
<h2 id="Java12"><a href="#Java12" class="headerlink" title="Java12"></a>Java12</h2><h3 id="String增加两个方法indent-和-transform"><a href="#String增加两个方法indent-和-transform" class="headerlink" title="String增加两个方法indent() 和 transform()"></a>String增加两个方法indent() 和 transform()</h3><h3 id="File增加文件对比方法"><a href="#File增加文件对比方法" class="headerlink" title="File增加文件对比方法"></a>File增加文件对比方法</h3><p>可以通过mismatch(Path path, Path path2) 方法来比较两个文件的内容差异</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">givenDifferentFiles_thenShouldFindMismatch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Path filePath3 = Files.createTempFile(<span class="string">&quot;file3&quot;</span>, <span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">    Path filePath4 = Files.createTempFile(<span class="string">&quot;file4&quot;</span>, <span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">    Files.writeString(filePath3, <span class="string">&quot;Java 12 Article&quot;</span>);</span><br><span class="line">    Files.writeString(filePath4, <span class="string">&quot;Java 12 Tutorial&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> mismatch = Files.mismatch(filePath3, filePath4);</span><br><span class="line">    assertEquals(<span class="number">8</span>, mismatch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Collector新增teeing方法"><a href="#Collector新增teeing方法" class="headerlink" title="Collector新增teeing方法"></a>Collector新增teeing方法</h3><p>这是一个数学方法，典型用法是第一个参数得出总数，第二个参数计算个数，第三个参数将取到前两个参数的值进行平均数计算。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Collector&lt;T, ?, R&gt; teeing(Collector&lt;? <span class="keyword">super</span> T, ?, R1&gt; downstream1,</span><br><span class="line">  Collector&lt;? <span class="keyword">super</span> T, ?, R2&gt; downstream2, BiFunction&lt;? <span class="keyword">super</span> R1, ? <span class="keyword">super</span> R2, R&gt; merger)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">givenSetOfNumbers_thenCalculateAverage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> mean = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">      .collect(Collectors.teeing(Collectors.summingDouble(i -&gt; i), </span><br><span class="line">        Collectors.counting(), (sum, count) -&gt; sum / count));</span><br><span class="line">    assertEquals(<span class="number">3.0</span>, mean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数字格式化"><a href="#数字格式化" class="headerlink" title="数字格式化"></a>数字格式化</h3><p>可以将数字进行格式化，按照某种语言习惯进行转换，比如1000在英语中可以转为1k。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">givenNumber_thenCompactValues</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    NumberFormat likesShort = </span><br><span class="line">      NumberFormat.getCompactNumberInstance(<span class="keyword">new</span> Locale(<span class="string">&quot;en&quot;</span>, <span class="string">&quot;US&quot;</span>), NumberFormat.Style.SHORT);</span><br><span class="line">    likesShort.setMaximumFractionDigits(<span class="number">2</span>);</span><br><span class="line">    assertEquals(<span class="string">&quot;2.59K&quot;</span>, likesShort.format(<span class="number">2592</span>));</span><br><span class="line"></span><br><span class="line">    NumberFormat likesLong = </span><br><span class="line">      NumberFormat.getCompactNumberInstance(<span class="keyword">new</span> Locale(<span class="string">&quot;en&quot;</span>, <span class="string">&quot;US&quot;</span>), NumberFormat.Style.LONG);</span><br><span class="line">    likesLong.setMaximumFractionDigits(<span class="number">2</span>);</span><br><span class="line">    assertEquals(<span class="string">&quot;2.59 thousand&quot;</span>, likesLong.format(<span class="number">2592</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="预览新特性"><a href="#预览新特性" class="headerlink" title="预览新特性"></a>预览新特性</h3><p>可以输入如下参数开启新特性的使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -Xlint:preview --enable-preview -source <span class="number">12</span> src/main/java/File.java</span><br></pre></td></tr></table></figure>

<h4 id="Switch-语法增强"><a href="#Switch-语法增强" class="headerlink" title="Switch 语法增强"></a>Switch 语法增强</h4><p>以前的switch写法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DayOfWeek dayOfWeek = LocalDate.now().getDayOfWeek();</span><br><span class="line">String typeOfDay = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (dayOfWeek) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY:</span><br><span class="line">    <span class="keyword">case</span> TUESDAY:</span><br><span class="line">    <span class="keyword">case</span> WEDNESDAY:</span><br><span class="line">    <span class="keyword">case</span> THURSDAY:</span><br><span class="line">    <span class="keyword">case</span> FRIDAY:</span><br><span class="line">        typeOfDay = <span class="string">&quot;Working Day&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> SATURDAY:</span><br><span class="line">    <span class="keyword">case</span> SUNDAY:</span><br><span class="line">        typeOfDay = <span class="string">&quot;Day Off&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在的switch语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可在一个case中判断多个字段，同时移除break语法，</span></span><br><span class="line">typeOfDay = <span class="keyword">switch</span> (dayOfWeek) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; <span class="string">&quot;Working Day&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> SATURDAY, SUNDAY -&gt; <span class="string">&quot;Day Off&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可在case中运行代码</span></span><br><span class="line"><span class="keyword">switch</span> (dayOfWeek) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; System.out.println(<span class="string">&quot;Working Day&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> SATURDAY, SUNDAY -&gt; System.out.println(<span class="string">&quot;Day Off&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 运行多行代码</span></span><br><span class="line"><span class="keyword">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; &#123;</span><br><span class="line">    <span class="comment">// more logic</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Working Day&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="instanceof的类型匹配"><a href="#instanceof的类型匹配" class="headerlink" title="instanceof的类型匹配"></a>instanceof的类型匹配</h4><p>以前在instanceof中进行类型判断和使用需要像这样</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">    String s = (String) obj;</span><br><span class="line">    <span class="keyword">int</span> length = s.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String s) &#123;</span><br><span class="line">    <span class="keyword">int</span> length = s.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JVM的修改"><a href="#JVM的修改" class="headerlink" title="JVM的修改"></a>JVM的修改</h3><h4 id="Shenandoah-一个致力于暂停时间短的垃圾收集器"><a href="#Shenandoah-一个致力于暂停时间短的垃圾收集器" class="headerlink" title="Shenandoah 一个致力于暂停时间短的垃圾收集器"></a>Shenandoah 一个致力于暂停时间短的垃圾收集器</h4><h4 id="Microbenchmark-Suite-微基准套件"><a href="#Microbenchmark-Suite-微基准套件" class="headerlink" title="Microbenchmark Suite 微基准套件"></a>Microbenchmark Suite 微基准套件</h4><p>Java12介绍了一组针对Java源码的约100个的微基准测试套件，这些套件可以测试Jvm的性能并帮助开发者在Jvm上进行开发。</p>
<h4 id="CDS-文档变为默认功能"><a href="#CDS-文档变为默认功能" class="headerlink" title="CDS 文档变为默认功能"></a>CDS 文档变为默认功能</h4><p>CDS用于减少JVM启动时间，在Java12中成为默认开启的功能，通过如下命令进行关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xshare:off HelloWorld.java</span><br></pre></td></tr></table></figure>

<h2 id="Java13"><a href="#Java13" class="headerlink" title="Java13"></a>Java13</h2><h3 id="新特性预览，需要手动开启"><a href="#新特性预览，需要手动开启" class="headerlink" title="新特性预览，需要手动开启"></a>新特性预览，需要手动开启</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -Xlint:preview --enable-preview -source <span class="number">12</span> src/main/java/File.java</span><br></pre></td></tr></table></figure>

<h4 id="Switch表达式增强，新增yield语法用于返回值"><a href="#Switch表达式增强，新增yield语法用于返回值" class="headerlink" title="Switch表达式增强，新增yield语法用于返回值"></a>Switch表达式增强，新增yield语法用于返回值</h4><p>用法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;preview&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenSwitchingOnOperationSquareMe_thenWillReturnSquare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> me = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">var</span> operation = <span class="string">&quot;squareMe&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">switch</span> (operation) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;doubleMe&quot;</span> -&gt; &#123;</span><br><span class="line">            yield me * <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;squareMe&quot;</span> -&gt; &#123;</span><br><span class="line">            yield me * me;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">default</span> -&gt; me;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="number">16</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多行文本块"><a href="#多行文本块" class="headerlink" title="多行文本块"></a>多行文本块</h4><p>现在可以更方便的对String进行多行文本的赋值，比如 JSON, XML, HTML 等文本。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String JSON_STRING </span><br><span class="line">  = <span class="string">&quot;&#123;\r\n&quot;</span> + <span class="string">&quot;\&quot;name\&quot; : \&quot;Baeldung\&quot;,\r\n&quot;</span> + <span class="string">&quot;\&quot;website\&quot; : \&quot;https://www.%s.com/\&quot;\r\n&quot;</span> + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">String TEXT_BLOCK_JSON = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    &quot;</span>name<span class="string">&quot; : &quot;</span>Baeldung<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    &quot;</span>website<span class="string">&quot; : &quot;</span>https:<span class="comment">//www.%s.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">assertThat(TEXT_BLOCK_JSON.contains(&quot;</span>Baeldung<span class="string">&quot;)).isTrue();</span></span><br><span class="line"><span class="string">assertThat(TEXT_BLOCK_JSON.indexOf(&quot;</span>www<span class="string">&quot;)).isGreaterThan(0);</span></span><br><span class="line"><span class="string">assertThat(TEXT_BLOCK_JSON.length()).isGreaterThan(0);</span></span><br></pre></td></tr></table></figure>

<h3 id="动态CDS归档"><a href="#动态CDS归档" class="headerlink" title="动态CDS归档"></a>动态CDS归档</h3><p>CDS从java10发布，到java12成为默认开启的功能。然而该功能的使用略显繁杂。开发者需要先试运行他们的程序以生成class列表，然后再将其转为归档文件。这之后，这些归档文件才能在虚拟机之间进行数据共享。<br>在Java13中，简化了归档文件的生成步骤。现在我们可以在程序创建的时候就生成共享归档文件。减少了试运行的那一步。我们需要在启动参数中加入-XX:ArchiveClassesAtExit并指定归档文件名来开启该功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:ArchiveClassesAtExit=&lt;archive filename&gt; -cp &lt;app jar&gt; AppName</span><br></pre></td></tr></table></figure>
<p>然后我们就可以在运行相同应用的时候直接使用共享文档</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:SharedArchiveFile=&lt;archive filename&gt; -cp &lt;app jar&gt; AppName</span><br></pre></td></tr></table></figure>

<h3 id="ZGC释放未使用内存"><a href="#ZGC释放未使用内存" class="headerlink" title="ZGC释放未使用内存"></a>ZGC释放未使用内存</h3><p>在该版本之前，ZGC虽然可以做到STW时间始终低于10ms，但是不像其他垃圾收集器会将未使用的堆内存释放。现在Java13拥有了该功能，并且该功能是默认开启的。并且ZGC现在将最大支持内存从4TB增加到了16TB。</p>
<h3 id="Socket-API重构"><a href="#Socket-API重构" class="headerlink" title="Socket API重构"></a>Socket API重构</h3><p>Socket API发布以来，20年未曾更改，在Java13终于进行了调整。</p>
<h3 id="其他更改"><a href="#其他更改" class="headerlink" title="其他更改"></a>其他更改</h3><ul>
<li>java.nio – method FileSystems.newFileSystem(Path, Map&lt;String, ?&gt;) added</li>
<li>java.time – new official Japanese era name added</li>
<li>javax.crypto – support for MS Cryptography Next Generation (CNG)</li>
<li>javax.security – property jdk.sasl.disabledMechanisms added to disable SASL mechanisms</li>
<li>javax.xml.crypto – new String constants introduced to represent Canonical XML 1.1 URIs</li>
<li>javax.xml.parsers – new methods added to instantiate DOM and SAX factories with namespaces support</li>
<li>Unicode support upgraded to version 12.1</li>
<li>Support added for Kerberos principal name canonicalization and cross-realm referrals</li>
</ul>
<h2 id="Java14"><a href="#Java14" class="headerlink" title="Java14"></a>Java14</h2><h3 id="Switch新语法和文本块语法实装"><a href="#Switch新语法和文本块语法实装" class="headerlink" title="Switch新语法和文本块语法实装"></a>Switch新语法和文本块语法实装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isTodayHoliday = <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;MONDAY&quot;</span>, <span class="string">&quot;TUESDAY&quot;</span>, <span class="string">&quot;WEDNESDAY&quot;</span>, <span class="string">&quot;THURSDAY&quot;</span>, <span class="string">&quot;FRIDAY&quot;</span> -&gt; <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SATURDAY&quot;</span>, <span class="string">&quot;SUNDAY&quot;</span> -&gt; <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;What&#x27;s a &quot;</span> + day);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String multiline = <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">    A quick brown fox jumps over a lazy dog; \</span></span><br><span class="line"><span class="string">    the lazy dog howls loudly.&quot;</span><span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Records-关键字（预览特性）"><a href="#Records-关键字（预览特性）" class="headerlink" title="Records 关键字（预览特性）"></a>Records 关键字（预览特性）</h3><p>可以通过定一个Records类，来减少类中多余的模版代码，Records相当于自动帮你生成了get，equals, hashCode, 构造方法和toString方法。可以看成简化版的lombok。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> record <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String password)</span> </span>&#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> User user1 = <span class="keyword">new</span> User(<span class="number">0</span>, <span class="string">&quot;UserOne&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">givenRecord_whenObjInitialized_thenValuesCanBeFetchedWithGetters</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertEquals(<span class="number">0</span>, user1.id());</span><br><span class="line">    assertEquals(<span class="string">&quot;UserOne&quot;</span>, user1.password());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenRecord_thenEqualsImplemented</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user2 = user1;</span><br><span class="line">    assertTrue(user1, user2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenRecord_thenToStringImplemented</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertTrue(user1.toString().contains(<span class="string">&quot;UserOne&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="NPE-报错增强，现在会准确提示报错在哪一行以及哪一个对象为空。"><a href="#NPE-报错增强，现在会准确提示报错在哪一行以及哪一个对象为空。" class="headerlink" title="NPE 报错增强，现在会准确提示报错在哪一行以及哪一个对象为空。"></a>NPE 报错增强，现在会准确提示报错在哪一行以及哪一个对象为空。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NullPointerException: Cannot store to <span class="keyword">int</span> array because <span class="string">&quot;a&quot;</span> is <span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h3 id="孵化特性，这些特性放在模块jdk-incubator-中"><a href="#孵化特性，这些特性放在模块jdk-incubator-中" class="headerlink" title="孵化特性，这些特性放在模块jdk.incubator.中"></a>孵化特性，这些特性放在模块jdk.incubator.中</h3><h4 id="访问外部内存的API"><a href="#访问外部内存的API" class="headerlink" title="访问外部内存的API"></a>访问外部内存的API</h4><p>现在允许java程序直接访问外部内存，比如计算机本地内存。</p>
<h4 id="打包工具"><a href="#打包工具" class="headerlink" title="打包工具"></a>打包工具</h4><p>现在可以通过jlink工具打包，生成在windows中exe文件或者macos中的dmg文件，以实现更方便的双击运行。</p>
<h3 id="ZGC现在可以在Windows和MacOS上使用-实验特性"><a href="#ZGC现在可以在Windows和MacOS上使用-实验特性" class="headerlink" title="ZGC现在可以在Windows和MacOS上使用-实验特性"></a>ZGC现在可以在Windows和MacOS上使用-实验特性</h3><h3 id="为G1-增加-NUMA-内存收集机制"><a href="#为G1-增加-NUMA-内存收集机制" class="headerlink" title="为G1 增加 NUMA 内存收集机制"></a>为G1 增加 NUMA 内存收集机制</h3><h3 id="JFR-事件流，增强了JFR的监控能力，现在可以通过消费者的方式直接获取监控结果"><a href="#JFR-事件流，增强了JFR的监控能力，现在可以通过消费者的方式直接获取监控结果" class="headerlink" title="JFR 事件流，增强了JFR的监控能力，现在可以通过消费者的方式直接获取监控结果"></a>JFR 事件流，增强了JFR的监控能力，现在可以通过消费者的方式直接获取监控结果</h3><h2 id="Java15"><a href="#Java15" class="headerlink" title="Java15"></a>Java15</h2><h3 id="records关键字实装"><a href="#records关键字实装" class="headerlink" title="records关键字实装"></a>records关键字实装</h3><h3 id="sealed，non-sealed，permits关键字"><a href="#sealed，non-sealed，permits关键字" class="headerlink" title="sealed，non-sealed，permits关键字"></a>sealed，non-sealed，permits关键字</h3><p>这些关键字提供了更精细的类之间的访问控制。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> sealed <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">    <span class="title">permits</span> <span class="title">Employee</span>, <span class="title">Manager</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上语法的效果是Person类将只能被Employee, Manager类继承。<br>注意：继承sealed类的子类必须用sealed, non-sealed, 或 final进行修饰，这样可以保证类层次有限，同时被JVM正确识别。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> non-sealed <span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐藏类"><a href="#隐藏类" class="headerlink" title="隐藏类"></a>隐藏类</h3><p>大部分程序员在日常开发中用不到隐藏类，JVM开发者会发现它的好处。隐藏类的目的是在程序运行时创建无法被发现的类。这种类无法被引用，被反射，同时具有较短的生命周期。</p>
<h3 id="模式匹配中的类型检查"><a href="#模式匹配中的类型检查" class="headerlink" title="模式匹配中的类型检查"></a>模式匹配中的类型检查</h3><p>该特性在java14中已经介绍过，代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (person <span class="keyword">instanceof</span> Employee) &#123;</span><br><span class="line">    Employee employee = (Employee) person;</span><br><span class="line">    Date hireDate = employee.getHireDate();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在java15中该特性得到增强，在类型判断成功后，jvm会自动将该变量赋值为对应类型进行后续操作，如下person对象自动赋值到了employee对象中，可以进行后续的变量操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (person <span class="keyword">instanceof</span> Employee employee &amp;&amp; employee.getYearsOfService() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="外部内存API"><a href="#外部内存API" class="headerlink" title="外部内存API"></a>外部内存API</h3><p>JAVA14中已经介绍过访问外部内存的API，在java15中增加若干功能。</p>
<ul>
<li>A new VarHandle API, to customize memory access var handles</li>
<li>Support for parallel processing of a memory segment using the Spliterator interface</li>
<li>Enhanced support for mapped memory segments</li>
<li>Ability to manipulate and dereference addresses coming from things like native calls</li>
</ul>
<h3 id="ZGC和Shenandoah成为可进行选择配置的垃圾收集器，G1依然是默认的垃圾收集器"><a href="#ZGC和Shenandoah成为可进行选择配置的垃圾收集器，G1依然是默认的垃圾收集器" class="headerlink" title="ZGC和Shenandoah成为可进行选择配置的垃圾收集器，G1依然是默认的垃圾收集器"></a>ZGC和Shenandoah成为可进行选择配置的垃圾收集器，G1依然是默认的垃圾收集器</h3><h3 id="Java15中移除偏向锁，RMI，Solaris-SPARC"><a href="#Java15中移除偏向锁，RMI，Solaris-SPARC" class="headerlink" title="Java15中移除偏向锁，RMI，Solaris/SPARC"></a>Java15中移除偏向锁，RMI，Solaris/SPARC</h3><h2 id="Java16"><a href="#Java16" class="headerlink" title="Java16"></a>Java16</h2><h3 id="动态代理现在可以反射接口的默认方法"><a href="#动态代理现在可以反射接口的默认方法" class="headerlink" title="动态代理现在可以反射接口的默认方法"></a>动态代理现在可以反射接口的默认方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Object proxy = Proxy.newProxyInstance(getSystemClassLoader(), <span class="keyword">new</span> Class&lt;?&gt;[] &#123; HelloWorld.class &#125;,</span><br><span class="line">    (prox, method, args) -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (method.isDefault()) &#123;</span><br><span class="line">            <span class="keyword">return</span> InvocationHandler.invokeDefault(prox, method, args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">Method method = proxy.getClass().getMethod(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">assertThat(method.invoke(proxy)).isEqualTo(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="日期格式的支持"><a href="#日期格式的支持" class="headerlink" title="日期格式的支持"></a>日期格式的支持</h3><p>通过一个标识符“B”来进行日期格式的转换。更多详细用法<a target="_blank" rel="noopener" href="https://www.baeldung.com/java-datetimeformatter">在此</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LocalTime date = LocalTime.parse(<span class="string">&quot;15:25:08.690791&quot;</span>);</span><br><span class="line">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string">&quot;h B&quot;</span>);</span><br><span class="line">assertThat(date.format(formatter)).isEqualTo(<span class="string">&quot;3 in the afternoon&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Stream-类增加toList方法"><a href="#Stream-类增加toList方法" class="headerlink" title="Stream 类增加toList方法"></a>Stream 类增加toList方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; integersAsString = Arrays.asList(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">List&lt;Integer&gt; ints = integersAsString.stream().map(Integer::parseInt).collect(Collectors.toList());</span><br><span class="line">List&lt;Integer&gt; intsEquivalent = integersAsString.stream().map(Integer::parseInt).toList();</span><br></pre></td></tr></table></figure>

<h3 id="Vector-API-Incubator"><a href="#Vector-API-Incubator" class="headerlink" title="Vector API Incubator"></a>Vector API Incubator</h3><h3 id="Records关键字功能增强"><a href="#Records关键字功能增强" class="headerlink" title="Records关键字功能增强"></a>Records关键字功能增强</h3><h3 id="instanceof模式匹配和Sealed关键字实装"><a href="#instanceof模式匹配和Sealed关键字实装" class="headerlink" title="instanceof模式匹配和Sealed关键字实装"></a>instanceof模式匹配和Sealed关键字实装</h3><h2 id="Java17"><a href="#Java17" class="headerlink" title="Java17"></a>Java17</h2><h3 id="浮点型计算将保证在不同的平台保持严格相同的结果"><a href="#浮点型计算将保证在不同的平台保持严格相同的结果" class="headerlink" title="浮点型计算将保证在不同的平台保持严格相同的结果"></a>浮点型计算将保证在不同的平台保持严格相同的结果</h3><h3 id="伪随机数生成器增强"><a href="#伪随机数生成器增强" class="headerlink" title="伪随机数生成器增强"></a>伪随机数生成器增强</h3><p>java17为伪随机数生成器新增了几个接口和实现。将更容易使用不同的算法并更好的支持stream为基础的编程。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> IntStream <span class="title">getPseudoInts</span><span class="params">(String algorithm, <span class="keyword">int</span> streamSize)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// returns an IntStream with size @streamSize of random numbers generated using the @algorithm</span></span><br><span class="line">    <span class="comment">// where the lower bound is 0 and the upper is 100 (exclusive)</span></span><br><span class="line">    <span class="keyword">return</span> RandomGeneratorFactory.of(algorithm)</span><br><span class="line">            .create()</span><br><span class="line">            .ints(streamSize, <span class="number">0</span>,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Applet-API-被移除"><a href="#Applet-API-被移除" class="headerlink" title="Applet API 被移除"></a>Applet API 被移除</h3><h3 id="对JDK的内部类更严格的封装，比如sun-misc-Unsafe，将保证开发者无法访问到此类方法"><a href="#对JDK的内部类更严格的封装，比如sun-misc-Unsafe，将保证开发者无法访问到此类方法" class="headerlink" title="对JDK的内部类更严格的封装，比如sun.misc.Unsafe，将保证开发者无法访问到此类方法"></a>对JDK的内部类更严格的封装，比如sun.misc.Unsafe，将保证开发者无法访问到此类方法</h3><h3 id="switch中的模式匹配"><a href="#switch中的模式匹配" class="headerlink" title="switch中的模式匹配"></a>switch中的模式匹配</h3><p>之前已经介绍过的instanceOf中的模式匹配，该功能进一步增强了switch的语法能力，如下，obj的类型转换直接发生在case关键字中，减少了很多冗余代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> record <span class="title">Human</span> <span class="params">(String name, <span class="keyword">int</span> age, String profession)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">checkObject</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">        <span class="keyword">case</span> Human h -&gt; <span class="string">&quot;Name: %s, age: %s and profession: %s&quot;</span>.formatted(h.name(), h.age(), h.profession());</span><br><span class="line">        <span class="keyword">case</span> Circle c -&gt; <span class="string">&quot;This is a circle&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> Shape s -&gt; <span class="string">&quot;It is just a shape&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">null</span> -&gt; <span class="string">&quot;It is null&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span> -&gt; <span class="string">&quot;It is an object&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">checkShape</span><span class="params">(Shape shape)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">        <span class="keyword">case</span> Triangle t &amp;&amp; (t.getNumberOfSides() != <span class="number">3</span>) -&gt; <span class="string">&quot;This is a weird triangle&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> Circle c &amp;&amp; (c.getNumberOfSides() != <span class="number">0</span>) -&gt; <span class="string">&quot;This is a weird circle&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span> -&gt; <span class="string">&quot;Just a normal shape&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RMI-功能被移除"><a href="#RMI-功能被移除" class="headerlink" title="RMI 功能被移除"></a>RMI 功能被移除</h3><h3 id="sealed关键字"><a href="#sealed关键字" class="headerlink" title="sealed关键字"></a>sealed关键字</h3><h3 id="移除Ahead-Of-Time-AOT-编译-和-Just-In-Time-JIT-编译方式"><a href="#移除Ahead-Of-Time-AOT-编译-和-Just-In-Time-JIT-编译方式" class="headerlink" title="移除Ahead-Of-Time (AOT) 编译 和 Just-In-Time (JIT) 编译方式"></a>移除Ahead-Of-Time (AOT) 编译 和 Just-In-Time (JIT) 编译方式</h3><p>在JDK9和10中被介绍的特性，在经历了多个版本迭代后，其维护成本过高，因此被移除。</p>
<h3 id="移除-Security-Manager"><a href="#移除-Security-Manager" class="headerlink" title="移除 Security Manager"></a>移除 Security Manager</h3><h3 id="外部方法和外部内存的API（孵化器特性）"><a href="#外部方法和外部内存的API（孵化器特性）" class="headerlink" title="外部方法和外部内存的API（孵化器特性）"></a>外部方法和外部内存的API（孵化器特性）</h3><p>外部方法和的API允许开发者访问JVM虚拟机之外的代码，外部内存的API可以管理堆外内存。其设计目的是为了取代JNI API，并提示其安全性和性能。<br>调用C语言库：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SymbolLookup libLookup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// loads a particular C library</span></span><br><span class="line">    <span class="keyword">var</span> path = JEP412.class.getResource(<span class="string">&quot;/print_name.so&quot;</span>).getPath();</span><br><span class="line">    System.load(path);</span><br><span class="line">    libLookup = SymbolLookup.loaderLookup();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Vector-API（二次孵化）"><a href="#Vector-API（二次孵化）" class="headerlink" title="Vector API（二次孵化）"></a>Vector API（二次孵化）</h3><p>Vector API 处理 SIMD（单指令，多数据）类型的操作，这意味着并行执行的各种指令集。 它利用支持向量指令的专用 CPU 硬件，并允许执行流水线等指令。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">newVectorComputation</span><span class="params">(<span class="keyword">float</span>[] a, <span class="keyword">float</span>[] b, <span class="keyword">float</span>[] c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; a.length; i += SPECIES.length()) &#123;</span><br><span class="line">        <span class="keyword">var</span> m = SPECIES.indexInRange(i, a.length);</span><br><span class="line">        <span class="keyword">var</span> va = FloatVector.fromArray(SPECIES, a, i, m);</span><br><span class="line">        <span class="keyword">var</span> vb = FloatVector.fromArray(SPECIES, b, i, m);</span><br><span class="line">        <span class="keyword">var</span> vc = va.mul(vb);</span><br><span class="line">        vc.intoArray(c, i, m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commonVectorComputation</span><span class="params">(<span class="keyword">float</span>[] a, <span class="keyword">float</span>[] b, <span class="keyword">float</span>[] c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; a.length; i ++) &#123;</span><br><span class="line">        c[i] = a[i] * b[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反序列化过滤器"><a href="#反序列化过滤器" class="headerlink" title="反序列化过滤器"></a>反序列化过滤器</h3><p>用于验证从不可信任来源发送来的序列化数据，这个过程发生在jvm虚拟机中，提升了安全性和健壮性。</p>
<h3 id="新增一个半年周期-特性的模块"><a href="#新增一个半年周期-特性的模块" class="headerlink" title="新增一个半年周期-特性的模块"></a>新增一个半年周期-特性的模块</h3><p>这个模块帮助开发者减轻开发一个新功能的压力，一个功能首先在该模块中进行试用，之后再发布到LTS模块中。</p>
<h3 id="新增LTS模块"><a href="#新增LTS模块" class="headerlink" title="新增LTS模块"></a>新增LTS模块</h3><blockquote>
<p>参考资料<br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java8-common-new-features.html">https://javaguide.cn/java/new-features/java8-common-new-features.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java9.html">https://javaguide.cn/java/new-features/java9.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java10.html">https://javaguide.cn/java/new-features/java10.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java11.html">https://javaguide.cn/java/new-features/java11.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java12-13.html">https://javaguide.cn/java/new-features/java12-13.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java14-15.html">https://javaguide.cn/java/new-features/java14-15.html</a><br><a target="_blank" rel="noopener" href="https://javaguide.cn/java/new-features/java16.html">https://javaguide.cn/java/new-features/java16.html</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-8-new-features">https://www.baeldung.com/java-8-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/new-java-9">https://www.baeldung.com/new-java-9</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-10-overview">https://www.baeldung.com/java-10-overview</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-11-new-features">https://www.baeldung.com/java-11-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-12-new-features">https://www.baeldung.com/java-12-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-13-new-features">https://www.baeldung.com/java-13-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-14-new-features">https://www.baeldung.com/java-14-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-15-new">https://www.baeldung.com/java-15-new</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-16-new-features">https://www.baeldung.com/java-16-new-features</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-17-new-features">https://www.baeldung.com/java-17-new-features</a></p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag"># 面试</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/06/06/blog/%E4%B8%80%E5%91%A8%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2%E6%94%B6%E9%9B%86-20220606/" rel="prev" title="一周技术博客收集-20220606">
                  <i class="fa fa-chevron-left"></i> 一周技术博客收集-20220606
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/06/22/tech/MySQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/" rel="next" title="MySQL常用命令笔记">
                  MySQL常用命令笔记 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ricky</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"shdvgj","repo":"shdvgj.github.io","client_id":"e1ed5420cf72d3747b1b","client_secret":"6c71276732dc19402ae304d000c471a4df889cd5","admin_user":"shdvgj","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"4b7c1e904b014160e25dd23333bde565"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
