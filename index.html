<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shdvgj.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="Ricky的个人博客">
<meta property="og:url" content="http://shdvgj.github.io/index.html">
<meta property="og:site_name" content="Ricky的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ricky">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://shdvgj.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Ricky的个人博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Ricky的个人博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">15</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">8</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">53</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ricky"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Ricky</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shdvgj" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shdvgj" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:linqianghuang@gmail.com" title="E-Mail → mailto:linqianghuang@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/RickyLoveCindy" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;RickyLoveCindy" rel="noopener" target="_blank"><i class="twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/xiaoqianglalala" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;xiaoqianglalala" rel="noopener" target="_blank"><i class="instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/29/2023/06/daily-tech-blog-collection-202306029/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/" class="post-title-link" itemprop="url">每日文章收集-20230629</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-29 13:06:53" itemprop="dateCreated datePublished" datetime="2023-06-29T13:06:53+08:00">2023-06-29</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-30 10:22:03" itemprop="dateModified" datetime="2023-06-30T10:22:03+08:00">2023-06-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%AF%8F%E6%97%A5%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">每日文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="【博文一览】"><a href="#【博文一览】" class="headerlink" title="【博文一览】"></a>【博文一览】</h1><h3 id="background-removal-js：免费开源的背景移除脚本"><a href="#background-removal-js：免费开源的背景移除脚本" class="headerlink" title="background-removal-js：免费开源的背景移除脚本"></a><a target="_blank" rel="noopener" href="https://github.com/imgly/background-removal-js">background-removal-js：免费开源的背景移除脚本</a></h3><p>通过该脚本可以在浏览器环境中直接移除图片的背景，无需担心多余的性能开销或者隐私顾虑。</p>
<p>其主要的功能特点有：</p>
<ul>
<li>浏览器上的背景移除：消除了额外的服务器成本。通过利用本地设备的计算能力，用户可以享受快速高效的背景去除过程。</li>
<li>数据保护：完全运行于浏览器端。无需任何数据传输到别的服务器，因此数据是绝对安全的。</li>
<li>与<a target="_blank" rel="noopener" href="https://img.ly/creative-sdk?utm_source=github&utm_medium=project&utm_campaign=bg-removal">IMG.LY的CE.SDK</a>（作者的另一个项目） 实现了无缝集成，使开发人员能够轻松地将强大的浏览器内图像抠图和背景去除功能整合到他们的项目中。<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/backgroundremove1.png"></li>
</ul>
<p>本地使用安装步骤如下</p>
<ul>
<li>NPM安装<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @imgly/background-removal</span><br></pre></td></tr></table></figure></li>
<li>代码引用：注意首次调用需要下载额外模块，因此会花费比较多时间。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> imglyRemoveBackground <span class="keyword">from</span> <span class="string">&quot;@imgly/background-removal&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> image_src: ImageData | <span class="built_in">ArrayBuffer</span> | <span class="built_in">Uint8Array</span> | Blob | URL | string = ...;</span><br><span class="line"></span><br><span class="line">imglyRemoveBackground(image_src).then(<span class="function">(<span class="params">blob: Blob</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// The result is a blob encoded as PNG. It can be converted to an URL to be used as HTMLImage.src</span></span><br><span class="line">  <span class="keyword">const</span> url = URL.createObjectURL(blob);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>进阶设置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Config = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: string; <span class="comment">// The public path used for model and wasm files</span></span><br><span class="line">  debug: bool; <span class="comment">// enable or disable useful console.log outputs</span></span><br><span class="line">  proxyToWorker: bool; <span class="comment">// Wether or wether not to proxy the calculations to a webworker. (Default true)</span></span><br><span class="line">  model: <span class="string">&#x27;small&#x27;</span> | <span class="string">&#x27;medium&#x27;</span>; <span class="comment">// The model to use. (Default &quot;medium&quot;)</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="fly-io：靠近用户运行的全栈应用程序和数据库"><a href="#fly-io：靠近用户运行的全栈应用程序和数据库" class="headerlink" title="fly.io：靠近用户运行的全栈应用程序和数据库"></a><a target="_blank" rel="noopener" href="https://fly.io/">fly.io：靠近用户运行的全栈应用程序和数据库</a></h3><p>fly.io是一个目前流行的云平台，专为运行全栈应用程序和数据库而设计。它的主要目标是使应用程序更靠近用户，以提供更快的响应时间和更好的用户体验，同时简化了开发人员的工作流程。</p>
<ul>
<li>安装flyctl<ul>
<li>macos：运行<code>brew install flyctl</code>或者<code>curl -L https://fly.io/install.sh | sh</code></li>
<li>linux：运行<code>curl -L https://fly.io/install.sh | sh</code></li>
<li>windows：powershell运行<code>pwsh -Command &quot;iwr https://fly.io/install.ps1 -useb | iex&quot;</code></li>
</ul>
</li>
<li>注册，输入以下命令跳转到注册页面，或者直接到注册页面进行注册。<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fly auth signup</span><br></pre></td></tr></table></figure></li>
<li>使用 <code>fly auth login</code> 登陆fly.io的账户</li>
<li>部署hellofly项目<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 直接拉取docker项目并完成部署</span></span><br><span class="line">fly launch --image flyio/hellofly:latest</span><br></pre></td></tr></table></figure></li>
<li>部署过程中要求选择地区，就近选择<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Choose a region <span class="keyword">for</span> deployment: Chicago, Illinois (US) (ord)</span><br></pre></td></tr></table></figure></li>
<li>询问是否需要Postgres或者Redis，按需选择</li>
<li>最后询问是否需要部署，部署完成后会在本地生成一个fly.toml的配置文件<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app = <span class="string">&quot;hellofly&quot;</span></span><br><span class="line">primary_region = <span class="string">&quot;ord&quot;</span></span><br><span class="line"></span><br><span class="line">[build]</span><br><span class="line">  image = <span class="string">&quot;flyio/hellofly:latest&quot;</span></span><br><span class="line"></span><br><span class="line">[http_service]</span><br><span class="line">  internal_port = 8080</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure></li>
<li>使用<code>fly deploy</code>部署完成后，可通过<code>fly status</code>命令检查项目状态</li>
<li>使用<code>fly open /&lt;your-name&gt;</code>命令可以在fly.io的网站访问到刚刚部署的项目<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/flyio1.webp"></li>
</ul>
<h3 id="TypeID：一个受到Stripe-ID启发的类型安全、可排序的全局唯一标识符（ID）"><a href="#TypeID：一个受到Stripe-ID启发的类型安全、可排序的全局唯一标识符（ID）" class="headerlink" title="TypeID：一个受到Stripe ID启发的类型安全、可排序的全局唯一标识符（ID）"></a><a target="_blank" rel="noopener" href="https://github.com/jetpack-io/typeid">TypeID：一个受到Stripe ID启发的类型安全、可排序的全局唯一标识符（ID）</a></h3><p>TypeIDs是UUIDv7的一种现代、类型安全的扩展。它在设计上受到Stripe API中前缀类似用法的启发。包含三个部分：</p>
<ul>
<li>类型前缀（由小写字母组成的最多63位的字符串）</li>
<li>一个下划线</li>
<li>一个128位的UUIDv7，以26个字符的base32字符串编码（根据Crockford的小写字母表）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_2x4y6z8a0b1c2d3e4f5g6h7j8k</span><br><span class="line">└──┘ └────────────────────────┘</span><br><span class="line">type    uuid suffix (base32)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>TypeID有以下特性：</p>
<ul>
<li>类型安全：您不会意外地在期望使用帖子ID的地方使用用户ID。在调试过程中，通过类型前缀，您可以立即了解TypeID引用的实体类型。</li>
<li>与UUID兼容：TypeID是UUID的超集。它们基于即将发布的UUIDv7标准。如果您解码TypeID并移除类型信息，您将得到一个有效的UUIDv7。</li>
<li>可K排序：TypeID是可K排序的，可以用作数据库中的主键，同时确保良好的局部性。与完全随机的全局ID（例如UUIDv4）相比，后者通常在数据库局部性方面表现不佳。</li>
<li>精心编码：基于base32的编码是URL安全的、不区分大小写的、避免了歧义字符，可以通过双击选择复制粘贴，并且与传统的十六进制编码（UUID使用的编码方式）相比，它是一种更紧凑的编码（26个字符对比36个字符）</li>
</ul>
<p>命令列表</p>
<ul>
<li>安装命令<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.jetpack.io/typeid | bash</span><br></pre></td></tr></table></figure></li>
<li>创建新的TypeID<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ typeid new prefix</span><br><span class="line">prefix_01h2xcejqtf2nbrexx3vqjhp41</span><br></pre></td></tr></table></figure></li>
<li>将TypeID解码位UUID<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ typeid decode prefix_01h2xcejqtf2nbrexx3vqjhp41</span><br><span class="line"><span class="built_in">type</span>: prefix</span><br><span class="line">uuid: 0188bac7-4afa-78aa-bc3b-bd1eef28d881</span><br></pre></td></tr></table></figure></li>
<li>将UUID编码为TypeID<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ typeid encode prefix 0188bac7-4afa-78aa-bc3b-bd1eef28d881</span><br><span class="line">prefix_01h2xcejqtf2nbrexx3vqjhp41</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="梵高艺术展"><a href="#梵高艺术展" class="headerlink" title="梵高艺术展"></a><a target="_blank" rel="noopener" href="https://www.vangoghmuseum.nl/en">梵高艺术展</a></h3><p><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh1.png"><br>这个网站介绍了关于梵高的生平和艺术作品，并还有出售梵高艺术展的门票。</p>
<p>正在举办的艺术展<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh2.png"><br>门票也不算贵，成人20欧元，未成年人免费，相比起国内，算是相当厚道。<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh3.png"></p>
<p>网站上展示梵高的1515副画作，并提供下载。<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh4.png"><br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh5.png"></p>
<p>以及梵高的故事。<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/vangogh6.png"></p>
<h3 id="未来的CSS：状态容器查询"><a href="#未来的CSS：状态容器查询" class="headerlink" title="未来的CSS：状态容器查询"></a><a target="_blank" rel="noopener" href="https://ishadeed.com/article/css-state-queries/">未来的CSS：状态容器查询</a></h3><p>状态容器查询。它是一种可以根据元素的状态和属性来应用样式的能力。通过状态容器查询，开发者可以根据元素在不同状态下的宽度、高度、可见性等属性，动态地调整其样式。这项功能将提供更强大的响应式设计和样式控制的能力，使网页设计更加灵活和适应不同设备和交互情境。</p>
<p>例如这样子进行设置：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card-wrapper</span> &#123;</span><br><span class="line">  container-type: inline-size;</span><br><span class="line">  container-name: card;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@container</span> card (<span class="attribute">min-width</span>: <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过上述语法，当容器宽度到达400px时，就会触发<code>.card &#123;display: flex;align-items: center;&#125;</code>的样式。</p>
<p>下面的图片可以更好的说明该语法的功能。<br><img src="/2023/06/29/2023/06/daily-tech-blog-collection-202306029/css1.png"></p>
<p>更多的语法说明详见作者的另一篇文章(<a target="_blank" rel="noopener" href="https://ishadeed.com/article/css-container-style-queries/)%E3%80%82">https://ishadeed.com/article/css-container-style-queries/)。</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/" class="post-title-link" itemprop="url">每日文章收集-20230628</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-28 09:55:34" itemprop="dateCreated datePublished" datetime="2023-06-28T09:55:34+08:00">2023-06-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-29 12:03:04" itemprop="dateModified" datetime="2023-06-29T12:03:04+08:00">2023-06-29</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%AF%8F%E6%97%A5%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">每日文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="【今日关注】"><a href="#【今日关注】" class="headerlink" title="【今日关注】"></a>【今日关注】</h1><h3 id="更快的机器，更慢的机器"><a href="#更快的机器，更慢的机器" class="headerlink" title="更快的机器，更慢的机器"></a><a target="_blank" rel="noopener" href="https://jmmv.dev/2023/06/fast-machines-slow-machines.html">更快的机器，更慢的机器</a></h3><p>这篇文章的作者在推特上发布了两段<a target="_blank" rel="noopener" href="https://twitter.com/jmmv/status/1671670996921896960">视频</a>，他用了一台装了windowsNT 3.51的旧电脑和一台装了windows11的新电脑，分别打开并关闭了windows的原生应用：命令行工具，资源管理器，记事本和画图。结果是，旧电脑没有任何延迟，新电脑却出现明显的加载延迟。这俩视频在推特上引起大量的关注和转发，大部分人都表示认同视频里的展示结果并发出了抱怨：为什么机器硬件越来越好，响应速度却越来越慢？</p>
<h4 id="第一版对比视频"><a href="#第一版对比视频" class="headerlink" title="第一版对比视频"></a>第一版对比视频</h4><p>作者的第一版视频对于两部机器的介绍是：</p>
<ul>
<li>一台搭载AMD K7-600处理器、128MB内存和5400转/分钟的硬盘的计算机，运行着Windows NT 3.51操作系统。这是一台1999-2000年的机器，而其操作系统比它还要旧约5年左右。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow1.png"></li>
<li>一台配备英特尔Core m3处理器、8GB内存和运行Windows 11的SSD的Surface Go 2。这是一台三年前发布的机器，原装搭载Windows 10，但官方支持升级至Windows 11。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow2.png"></li>
</ul>
<p>后来被人指出surface go的配置是错误的，因为作者错误的引用了Surface Laptop Go 2的配置。同时由于app已经预先打开过，所以都在内存中已经存在，这次的对比显然不够公平。</p>
<h4 id="第二版对比视频"><a href="#第二版对比视频" class="headerlink" title="第二版对比视频"></a>第二版对比视频</h4><p>作者重新发布了一版对比视频，这次的两台机器是：</p>
<ul>
<li>在K7-600机器上安装Windows 2000。这是一个来自1999年的操作系统，在同一年的硬件上运行。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow3.png"></li>
<li>在Mac Pro 2013上安装Windows 11，配备一颗3.5GHz的6核Xeon E5-1650v2处理器，32GB内存，双GPU以及一块最高可持续读取速度达到1GB/s的SSD。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow4.png"></li>
</ul>
<p>注意到第二台电脑是一台十年前的机器运行近几年的系统，但是作者认为这么一台十年前顶配的电脑在打开最简单的桌面应用时有延迟也是不可接受的。</p>
<p>两版视频揭示了同样的结果，更旧的电脑更旧的系统确实反应极快，打开这些桌面应用都是秒开，而更新的电脑和更新的系统却都同样有极其明显的延迟。</p>
<h4 id="计算机的进步"><a href="#计算机的进步" class="headerlink" title="计算机的进步"></a>计算机的进步</h4><p>从计算机产业角度来看，在21世纪的计算机发生了巨大的技术进步：</p>
<ul>
<li>更佳的图形和高性能显示器，更快的网络，实时视频剪辑等。</li>
<li>从难以忍受的缓慢I/O读取速度的HDD硬盘，CD和DVD进化到超高速的SSD，使得计算机速度，大型游戏运行，一次性打开超大图片的文件夹都变得顺畅无比。</li>
<li>硬件更易安装，无线设备普及，文本的国际化（unicode的进步）。</li>
</ul>
<h4 id="潜在的隐患"><a href="#潜在的隐患" class="headerlink" title="潜在的隐患"></a>潜在的隐患</h4><p>经历了以上巨大进步的计算机产业，为啥还会出现作者一开始展示的视频的情况呢？有人提出可能是更新的系统需要加载更多的像素，为了展示更好的图形。这显然不是一个很好的理由，作者也马上发了一个打脸视频，将新机器的像素调到最低，关闭4k，关闭特效等等图形效果，结果打开应用的延迟并没有任何改善。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow5.png"></p>
<p>GPU的出现减轻了CPU的负担，而出现在图形上的延迟通常是由于动画的有意暂停导致，为了兼容4k显示器在老旧机器上运行。但是作者发现的延迟并不属于这种情况。</p>
<h4 id="一些别的实例"><a href="#一些别的实例" class="headerlink" title="一些别的实例"></a>一些别的实例</h4><ul>
<li>windows上的记事本经历了无数代都还能响应快速，直到UWP的出现，情况开始急转直下。</li>
<li>windows的命令行工具随着越来越多的可视化特性，变得越来越慢，PowerShell的新窗口打开甚至要花上几秒钟。</li>
<li>macos也没有表现的更好，甚至M1芯片的电脑也在打开系统设置时明显慢于以前的机器。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/fastslow6.png"></li>
<li>linux看起来受到影响较小，原生的应用即使在10多年前的电脑上也能运行出色。然而一旦你开始安装第三方的程序，就会开始感受到变慢。</li>
<li>谷歌的程序也是，最早的原生谷歌应用非常快速，现在也开始表现不佳。</li>
</ul>
<h4 id="可能的原因"><a href="#可能的原因" class="headerlink" title="可能的原因"></a>可能的原因</h4><ul>
<li>会是软件臃肿的原因吗？根据帕累托法则，80%的用户只用到了20%的软件功能，但是根据剩下20%的用户行为却又各自不同。</li>
<li>为了解决软件臃肿的问题，我们引入了框架和抽象。但是看看RUST就知道，这并不是问题。</li>
<li>大型程序和软件的开发需要优先考虑的是节省开发者的时间，这意味着更高的优先级是花大量的时间调试程序而非优化响应时间。</li>
<li>多平台的开发导致开发者想要节省时间，于是考虑跨平台框架，例如Electron。</li>
<li>这种跨平台的框架显然导致了很多程序的延迟，比如1password和spotify。</li>
<li>另一个可能的原因是解释性语言的盛行，例如java和.NET，这些语言在优化长期运行的进程时表现优秀，但是并不会怎么去优先考虑快速启动。</li>
</ul>
<h4 id="逐渐消失的一次性改进"><a href="#逐渐消失的一次性改进" class="headerlink" title="逐渐消失的一次性改进"></a>逐渐消失的一次性改进</h4><p>这里说的是从HDD到SSD的巨大改进，这个改进直接将电脑的表现提升到了另一个层次。但是随着时间发展和软件开发的日渐臃肿，这个一次性的改进优势逐渐被蚕食。现在你已经无法感受到SSD刚刚出现那会儿的极速体验了。而另一方面，现在操作系统几乎已经没有办法运行在HDD硬盘上了，当代的操作系统已经默认了你使用SSD，以此为基础，软件程序才能获得基本的体验。</p>
<p>同样的事情可能也会发生在苹果芯片上，缺乏节制的软件设计，完全不去节约系统资源的开发模式，也会逐渐蚕食掉苹果芯片的硬件改进，多年以后，软件速度也会渐渐慢下来。</p>
<blockquote>
<p>计算机架构师能否通过其他革命性的技术转变来拯救我们呢？我不希望依赖这一点。不是因为这些转变可能不存在，而是因为我们不应该需要它们。</p>
</blockquote>
<h1 id="【博文一览】"><a href="#【博文一览】" class="headerlink" title="【博文一览】"></a>【博文一览】</h1><h3 id="密码游戏"><a href="#密码游戏" class="headerlink" title="密码游戏"></a><a target="_blank" rel="noopener" href="https://neal.fun/password-game/">密码游戏</a></h3><p>颇为有意思的一个网页游戏，游戏界面很简单，只要输入符合规则的密码就行，一开始的规则非常正常，到后面的脑洞就越来越大。</p>
<ul>
<li>一开始还是很正常的，至少5个字符，包含特殊符号和大写字母等常用的密码验证规则。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/passwordgame1.png"></li>
<li>渐渐画风开始变得奇怪，要包含赞助商的名字。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/passwordgame2.png"></li>
<li>渐渐离谱，要包含谷歌街景里这个国家的名字。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/passwordgame3.png"></li>
<li>开始脑筋急转弯，把这个蛋安全的放到你的密码里。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/passwordgame4.png"></li>
</ul>
<p>这个游戏更适合不懂得前端技术的人来玩，因为这些验证规则完全在前端实现，技术人员通过浏览器的开发者工具就可以轻松实现作弊。例如上面的谷歌街景国家问题，直接可以从js里面找到答案是norway。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/passwordgame5.png"></p>
<p>当然，对于前端人员来说，这个网页也颇有学习的价值，这些五花八门的验证规则细想起来也不是那么简单就能通过js来实现的，看这个网站的js源码非常具有借鉴价值。</p>
<h3 id="进阶MacOS命令行工具"><a href="#进阶MacOS命令行工具" class="headerlink" title="进阶MacOS命令行工具"></a><a target="_blank" rel="noopener" href="https://saurabhs.org/advanced-macos-commands">进阶MacOS命令行工具</a></h3><p>我们知道在linux上的命令绝大部分都能在macos上使用，这里介绍几个在macos上的专属命令，不用去找复杂的第三方工具，可以实现很多常用的功能。</p>
<ul>
<li><code>caffeinate</code> 设定mac睡眠行为</li>
<li><code>pbcopy, pbpaste</code> 与系统剪贴板互动</li>
<li><code>networkQuality</code> 测算网速</li>
<li><code>sips</code> 图片操作</li>
<li><code>open</code> 打开文件或者应用</li>
<li><code>textutil</code> 文档转换器（主要用于html和doc文档的互转）</li>
<li><code>mdfind, mdls</code> 聚光灯搜索</li>
<li><code>screencapture</code> 屏幕截图</li>
<li><code>taskpolicy</code> 控制进程调度</li>
<li><code>say</code> 文本阅读</li>
<li><code>pmset</code> 配置电源管理</li>
<li><code>networksetup</code> 配置网络设定</li>
<li><code>qlmanage</code> 管理快速查看</li>
<li><code>softwareupdate</code> 管理系统升级</li>
<li><code>system_profiler</code> 查看系统信息</li>
</ul>
<h3 id="用Linux的Namespaces，cgroups和chroot搭建你自己docker"><a href="#用Linux的Namespaces，cgroups和chroot搭建你自己docker" class="headerlink" title="用Linux的Namespaces，cgroups和chroot搭建你自己docker"></a><a target="_blank" rel="noopener" href="https://akashrajpurohit.com/blog/build-your-own-docker-with-linux-namespaces-cgroups-and-chroot-handson-guide/">用Linux的Namespaces，cgroups和chroot搭建你自己docker</a></h3><p>docker是总所周知的容器平台，这篇文章不是旨在取代docker，而是通过这么一篇介绍让读者明白Docker中容器的核心机制。</p>
<p>首先介绍linux的这几个概念：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://akashrajpurohit.com/blog/linux-namespaces-isolating-your-system-for-enhanced-security-and-performance/">Namespaces</a>：命名空间（namespaces）是一种内核特性，用于将系统资源隔离和虚拟化，使得每个进程拥有独立的视图，以便在不同的命名空间中运行。</li>
<li><a target="_blank" rel="noopener" href="https://akashrajpurohit.com/blog/linux-control-groups-finetuning-resource-allocation-for-optimal-system-performance/">cgroups</a>：控制组（cgroups）是一种资源管理机制，用于对进程和进程组进行资源限制和分配。</li>
<li><a target="_blank" rel="noopener" href="https://akashrajpurohit.com/blog/how-to-create-a-restricted-environment-with-the-linux-chroot-command/">chroot</a>：chroot是一种操作系统级别的功能，用于将进程的根目录更改为指定的目录，创建一个被隔离的运行环境。</li>
</ul>
<p>搭建“docker”</p>
<ul>
<li>使用<code>unshare</code>命令指定不同的命名空间。<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unshare --uts --pid --net --mount --ipc --fork</span><br></pre></td></tr></table></figure></li>
<li>执行如下命令创建一个新的cgroup，并分配cpu的配额限制。<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建新的cgroup</span></span><br><span class="line">mkdir /sys/fs/cgroup/cpu/container1</span><br><span class="line"><span class="comment">## 分配cpu限额</span></span><br><span class="line"><span class="built_in">echo</span> 100000 &gt; /sys/fs/cgroup/cpu/container1/cpu.cfs_quota_us</span><br><span class="line"><span class="comment">## 写入0用于移除之前曾分配过的进程</span></span><br><span class="line"><span class="built_in">echo</span> 0 &gt; /sys/fs/cgroup/cpu/container1/tasks</span><br><span class="line"><span class="comment">## 写入$$ 确保当前进程的shell后续进程会成为croup中的子进程，并收到cpu限额的限制</span></span><br><span class="line"><span class="built_in">echo</span> $$ &gt; /sys/fs/cgroup/cpu/container1/tasks</span><br></pre></td></tr></table></figure></li>
<li>使用<code>debootstrap</code>命令创建容器的根文件目录。<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debootstrap focal ./ubuntu-rootfs http://archive.ubuntu.com/ubuntu/</span><br></pre></td></tr></table></figure></li>
<li>挂载系统目录和chroot容器<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 挂载proc文件目录，proc文件提供关于进程和系统资源的信息。</span></span><br><span class="line">mount -t proc none ./ubuntu-rootfs/proc</span><br><span class="line"><span class="comment">## 挂载sysfs文件目录，sysfs文件系统以分层格式提供有关设备、驱动程序和其他与内核相关的信息。</span></span><br><span class="line">mount -t sysfs none ./ubuntu-rootfs/sys</span><br><span class="line"><span class="comment">## 绑定dev目录，dev目录目录包含表示系统上物理和虚拟设备的设备文件。</span></span><br><span class="line">mount -o <span class="built_in">bind</span> /dev ./ubuntu-rootfs/dev</span><br><span class="line"><span class="comment">## </span></span><br><span class="line">chroot ./ubuntu-rootfs /bin/bash</span><br></pre></td></tr></table></figure></li>
<li>完成上面几步后，就搭建了自己的容器环境，现在可以在容器内运行程序<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(container) $ apt update</span><br><span class="line">(container) $ apt install nginx</span><br><span class="line">(container) $ service nginx start</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="OPNsense：开源的安全平台"><a href="#OPNsense：开源的安全平台" class="headerlink" title="OPNsense：开源的安全平台"></a><a target="_blank" rel="noopener" href="https://opnsense.org/">OPNsense：开源的安全平台</a></h2><p><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/opnsense1.png"><br>根据官网介绍，涉及安全方面的内容，从虚拟私人网络到入侵检测，这是一款一流的免费开源项目。有下列功能（翻译自chatgpt）：</p>
<ul>
<li>状态防火墙：具有对IPv4和IPv6的支持以及对被阻止或通过的流量的实时查看。</li>
<li>多WAN：具备多WAN功能，包括负载均衡和故障转移支持。</li>
<li>虚拟私人网络：集成支持IPsec（包括基于路由的IPsec）、OpenVPN，以及可插拔的支持Tinc（全网VPN）和WireGuard。</li>
<li>硬件故障转移：当您不能承受停机时间时，请使用我们的自动无缝硬件故障转移功能，利用常见地址冗余协议（CARP）进行状态同步，以实现最高可能的可用性。</li>
<li>软件定义广域网（SD-WAN）：为了轻松进行设置、配置和监控，可以使用ZeroTier插件在几分钟内设置您的软件定义广域网（SD-WAN）。</li>
<li>入侵检测和防御：利用Suricata和Proofpoint的新兴威胁开放规则，采用最先进的内联入侵预防技术，摆脱木马和CNC机器人的困扰。可选择集成ET PRO（商业订阅）或ET PRO Telemetry（免费注册）。</li>
<li>两步验证（2FA）：系统中始终支持两步验证（2FA），包括用户界面和VPN等服务。</li>
<li>路由协议：使用Free Range Router项目，提供可插拔的OSPF和BGP支持。</li>
<li>网络过滤：完全集成的Web代理，具有访问控制和支持外部黑名单，以过滤不需要的流量。其他选项包括防火墙别名和DNS黑名单。轻松屏蔽广告！</li>
<li>直观的用户界面：在任何开源防火墙中都可以找到的最直观、完全响应的用户界面，具有集成搜索选项。</li>
<li>多语言：用户可选择的语言支持，包括英语、捷克语、中文、法语、德语、意大利语、日语、葡萄牙语、俄语和西班牙语。</li>
<li>在线文档：完全免费并支持搜索的在线文档。</li>
</ul>
<h2 id="Mofi：免费且无需下载的音乐编辑网站"><a href="#Mofi：免费且无需下载的音乐编辑网站" class="headerlink" title="Mofi：免费且无需下载的音乐编辑网站"></a><a target="_blank" rel="noopener" href="https://mofi.loud.red/">Mofi：免费且无需下载的音乐编辑网站</a></h2><ul>
<li>将音乐文件拖拽到该网站，或者直接粘贴音乐的网址，就可以开始进行编辑。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/mofi1.png"></li>
<li>进入到编辑界面，上面部分是整首歌的音轨，下面部分是根据你的编辑生成的cut，可以进行导出。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/mofi2.png"></li>
<li>选择需要编辑的部分，并选择Avoid this，Prefer this，Repeat this进行编辑。网站会根据你的选择生成匹配的cut。<br><img src="/2023/06/28/2023/06/weekly-tech-blog-collection-202306028/mofi3.png"></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/" class="post-title-link" itemprop="url">每日文章收集-20230626</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-26 11:43:15" itemprop="dateCreated datePublished" datetime="2023-06-26T11:43:15+08:00">2023-06-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-28 09:57:14" itemprop="dateModified" datetime="2023-06-28T09:57:14+08:00">2023-06-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%AF%8F%E6%97%A5%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">每日文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="【今日关注】"><a href="#【今日关注】" class="headerlink" title="【今日关注】"></a>【今日关注】</h1><h2 id="vrite-开源无界面内容管理系统（CMS），适用于编程博客、文档等"><a href="#vrite-开源无界面内容管理系统（CMS），适用于编程博客、文档等" class="headerlink" title="vrite: 开源无界面内容管理系统（CMS），适用于编程博客、文档等"></a><a target="_blank" rel="noopener" href="https://vrite.io/">vrite: 开源无界面内容管理系统（CMS），适用于编程博客、文档等</a></h2><p>vrite开源的专用于写作技术内容的CMS系统。根据官网介绍，具有几个特点：</p>
<ul>
<li>简洁的UI</li>
<li>内置看板界面，可以轻松管理任意规模的产品流程</li>
<li>所见即所得，支持markdown和快捷键，协同写作等</li>
<li>对技术写作量身定做，支持高亮，自动补全等</li>
<li>提供API和webhook，与各种前端界面轻松集成</li>
<li>完备的权限管理系统</li>
</ul>
<h3 id="基本概念介绍"><a href="#基本概念介绍" class="headerlink" title="基本概念介绍"></a>基本概念介绍</h3><p>Vrite使用三个概念来组织管理内容。</p>
<ul>
<li>工作空间（Workspaces）：独立的单元，用于存储许多内容组（Content groups）、配置API访问或编辑体验的设置，以及关于整个团队及其角色的详细信息；可以创建或被加入到任意数量的工作区。</li>
<li>内容组（Content groups）：如果熟悉看板界面的话，这就相当于看板仪表中的列，用于组织内容碎片（Content pieces）。</li>
<li>内容碎片（Content pieces）：相当于看板界面中的卡片，用于编辑具体的内容，包含实际的内容和相关元数据。</li>
</ul>
<h3 id="使用工作空间"><a href="#使用工作空间" class="headerlink" title="使用工作空间"></a>使用工作空间</h3><p>点击侧边栏切换工作空间。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite2.png"><br>在该界面选择或新增工作空间。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite3.png"></p>
<h3 id="编辑内容"><a href="#编辑内容" class="headerlink" title="编辑内容"></a>编辑内容</h3><p>进入工作空间后，左边一栏是内容碎片的属性。右边是内容组和内容碎片。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite4.png"><br>点击内容碎片进入编辑界面后，将看到vrite所见即所得的特性。</p>
<ul>
<li>弹起菜单：选择任意内容，会弹出浮动菜单用于选择样式，包括加粗，斜体，代码，链接等<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite5.png"></li>
<li>段落菜单：在段落前或者空白区域键入“/”键就会弹出段落菜单。可以选择将段落定义为选定的格式。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite6.png"></li>
<li>链接菜单：将鼠标移动到一个包含超链接的内容上时，会出现该链接网页的预览内容。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite7.png"></li>
<li>支持任意markdown语法，同时还可使用快捷键快速定义格式。</li>
<li>特殊格式的内容会弹出一个编辑预览的内容块，例如图片，代码等。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite8.png"></li>
<li>顶部栏包含三个功能<ul>
<li>内容统计：统计段落，单词数，字符数，代码行数。</li>
<li>导出：支持导出json，html，github适用的markdown格式。</li>
<li>禅模式：仅保留内容，剔除所有的菜单和干扰，专注于内容编辑。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite9.png"></li>
</ul>
</li>
<li>支持协同编辑，团队成员编辑过的内容会显示高亮并展示成员的名字。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite10.png"></li>
</ul>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>vrite的插件中心目前并不支持第三方的插件，只包含了四个和功能相关的插件。</p>
<ul>
<li>Hashnode：自动发布到<a target="_blank" rel="noopener" href="https://hashnode.com/">Hashnode</a>。</li>
<li>Dev.to：自动发布到<a target="_blank" rel="noopener" href="https://dev.to/">Dev.to</a>。</li>
<li>Medium：自动发布到<a target="_blank" rel="noopener" href="https://medium.com/">Medium</a>。</li>
<li>GPT-3.5: 编辑内容时可以直接让chatGpt生成。</li>
</ul>
<h3 id="JavaScript-SDK"><a href="#JavaScript-SDK" class="headerlink" title="JavaScript SDK"></a>JavaScript SDK</h3><p>通过npm安装。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vrite/sdk</span><br></pre></td></tr></table></figure>
<p>安装完成后可以通过sdk提供的工具方法获取内容组和内容碎片等。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/vrite11.png"></p>
<h3 id="自托管"><a href="#自托管" class="headerlink" title="自托管"></a>自托管</h3><p>网站说明文档暂不建议现在进行自托管，因为vrite的稳定版本到2023年的第三季度才会发布。如果要进行自托管，网站也进行了一些说明。<br>项目结构基于<a target="_blank" rel="noopener" href="https://turbo.build/repo">Turborepo</a></p>
<ul>
<li>最重要的依赖是：<ul>
<li>Typescript</li>
<li>Solid.js</li>
<li>Fastify</li>
<li>tRpc</li>
<li>Tiptap &amp; ProseMirror </li>
<li>Y.js &amp; HocusPocus </li>
<li>Monaco Editor </li>
<li>Astro </li>
</ul>
</li>
<li>目录结构<ul>
<li>/package<ul>
<li>/backend</li>
<li>/components</li>
<li>/editor</li>
<li>/extensions</li>
<li>/scripts</li>
<li>/sdk/javascript</li>
</ul>
</li>
<li>/apps<ul>
<li>/backend/api</li>
</ul>
</li>
<li>…….</li>
</ul>
</li>
<li>环境变量<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Database</span></span><br><span class="line">MONGO_URL=</span><br><span class="line">REDIS_URL=</span><br><span class="line">DATABASE=</span><br><span class="line"><span class="comment"># Security</span></span><br><span class="line">SECRET=</span><br><span class="line"><span class="comment"># Domains</span></span><br><span class="line">....</span><br></pre></td></tr></table></figure>
目前vrite的数据库基于MongoDB，Redis，S3。</li>
</ul>
<h1 id="【博文一览】"><a href="#【博文一览】" class="headerlink" title="【博文一览】"></a>【博文一览】</h1><h3 id="try命令：试一下你的命令并看下效果"><a href="#try命令：试一下你的命令并看下效果" class="headerlink" title="try命令：试一下你的命令并看下效果"></a><a target="_blank" rel="noopener" href="https://github.com/binpash/try">try命令：试一下你的命令并看下效果</a></h3><p>安装这个try命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/binpash/try.git</span><br></pre></td></tr></table></figure>
<p>使用try并执行别的命令，可以看到命令的预期效果。并会在结尾询问是否要真实执行该命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">try pip3 install libdash</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">Defaulting to user installation because normal site-packages is not writeable</span><br><span class="line">Collecting libdash</span><br><span class="line">  Downloading libdash-0.3.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (254 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 254.6/254.6 KB 2.1 MB/s eta 0:00:00</span><br><span class="line">Installing collected packages: libdash</span><br><span class="line">Successfully installed libdash-0.3.1</span><br><span class="line">WARNING: Running pip as the <span class="string">&#x27;root&#x27;</span> user can result <span class="keyword">in</span> broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv</span><br><span class="line"></span><br><span class="line">Changes detected <span class="keyword">in</span> the following files:</span><br><span class="line"></span><br><span class="line">/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.<span class="built_in">local</span>/lib/python3.10/site-packages/libdash/ast.py (modified/added)</span><br><span class="line">/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.<span class="built_in">local</span>/lib/python3.10/site-packages/libdash/_dash.py (modified/added)</span><br><span class="line">/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.<span class="built_in">local</span>/lib/python3.10/site-packages/libdash/__init__.py (modified/added)</span><br><span class="line">/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.<span class="built_in">local</span>/lib/python3.10/site-packages/libdash/__pycache__/printer.cpython-310.pyc (modified/added)</span><br><span class="line">/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.<span class="built_in">local</span>/lib/python3.10/site-packages/libdash/__pycache__/ast.cpython-310.pyc (modified/added)</span><br><span class="line">&lt;snip&gt;</span><br><span class="line"></span><br><span class="line">Commit these changes? [y/N] y</span><br></pre></td></tr></table></figure>

<p>需要注意，这个命令并不是生成一个沙盒，它只是利用了linux系统的命名空间和overlayfs。因此不应该使用try去执行无法信任的命令。</p>
<h3 id="Google在设置里隐藏了一个秘密的浏览器"><a href="#Google在设置里隐藏了一个秘密的浏览器" class="headerlink" title="Google在设置里隐藏了一个秘密的浏览器"></a><a target="_blank" rel="noopener" href="https://matan-h.com/google-has-a-secret-browser-hidden-inside-the-settings/">Google在设置里隐藏了一个秘密的浏览器</a></h3><p>作者在安卓系统里发现一个惊人的bug，存在于安卓的各种app中，以及系统设置和谷歌适配的app里，这个浏览器甚至可以绕过家长控制！具体复现步骤如下：<br>（由于手头并没有安卓机，暂时无法复现，而且考虑到这篇文章是国外博主发布的，大概率也是原生安卓系统的bug，国内的安卓机应该无法复现。）</p>
<ul>
<li>进入“设置”→“Google”（或任何允许选择账户的应用程序），点击“管理我的账户”。</li>
<li>然后进入“安全”选项卡。在其中，向下滚动直到找到“密码管理器”并点击。</li>
<li>点击右上角的“设置”图标。</li>
<li>向下滚动，直到出现“设置设备加密”。点击它，然后点击“了解有关设备加密的更多信息”。</li>
<li>现在你进入了浏览器。然后点击汉堡菜单（就是类似于“三”这样的按钮），然后点击“隐私政策”。</li>
<li>在顶部点击九个点，等待5秒钟（加载需要一些时间），然后点击“搜索”（如果你找不到搜索图标，你也可以向下滚动直到找到“Google”，然后点击它）。</li>
<li>从你的Google账户注销。</li>
<li>然后就得到了秘密浏览器，可以随意浏览任何网站。</li>
</ul>
<p>这个bug作者已经反馈给谷歌，并得到了回复，估计不久就会被修复。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/googlebug1.png"></p>
<h3 id="WinGPT：windows3-1上的AI助理"><a href="#WinGPT：windows3-1上的AI助理" class="headerlink" title="WinGPT：windows3.1上的AI助理"></a><a target="_blank" rel="noopener" href="https://www.dialup.net/wingpt/">WinGPT：windows3.1上的AI助理</a></h3><p><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/wingpt1.png"><br>作者在古早的windows3.1上开发了一个程序，实现了类似chatgpt的问答功能。在开发过程中克服了相当多的困难：</p>
<ul>
<li>通过一系列努力在windows3.1上实现了tls1.3协议来调用chatgpt的接口，关于这部分的工作，看作者的另一篇<a target="_blank" rel="noopener" href="https://www.dialup.net/wingpt/tls.html">文章</a>。</li>
<li>windows3.1上原生的UI界面非常难画，需要通过C语言代码一点点调试，而且也缺少一些如今通用的UI组件。</li>
<li>windows3.1没有状态栏，作者甚至询问了chatgpt如何解决，但是chatgpt并没有给出正确的答案。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/wingpt2.png"></li>
<li>用windows上的画图工具画了一个logo。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/wingpt3.png"></li>
<li>为了解决内存限制问题，作者将问答的文本数量进行了控制，同时也不去发送上下文内容，这意味着wingpt无法根据前文进行问答。</li>
</ul>
<p>作者放出了wingpt的<a target="_blank" rel="noopener" href="https://www.dialup.net/wingpt/download/wingpt10.zip">下载地址</a>和<a target="_blank" rel="noopener" href="https://www.dialup.net/wingpt/tls.html">源码</a>。（国外的hacker真是厚道）当然也有限制，必须运行在16位或者32位的windows3.1上，而且需要你有一个openai的api key。</p>
<h3 id="XML是未来"><a href="#XML是未来" class="headerlink" title="XML是未来"></a><a target="_blank" rel="noopener" href="https://www.bitecode.dev/p/hype-cycles">XML是未来</a></h3><p>好吧，这是一个标题党。文章很棒，作者的主要目的是吐槽前端技术的爆炸、微服务过度等许多愚蠢的潮流。</p>
<p>作者初次接触xml的时候，便被告知xml将取代一切：html变为xhtml，验证用dtd，用xslt进行转换和展示，用soap进行通信。当然最后的结果大家都知道，xml并没有取代一切。</p>
<p>作者从中学到的教训是：没有银弹，所有工具都有其优缺点。而技术人员自认为自己是理性的，其实受到了炒作，营销和情绪的影响，甚至受其影响比起普通人更甚。</p>
<p>而xml只是许许多多潮流中的普通一员而已，作者吐槽了好几个技术潮流的起伏：</p>
<ul>
<li>MangoDB出现时，突然所有东西都要使用NoSQL。新手们不管三七二十一，就把数据一股脑放在了NoSQL中，然而NoSQL没有没有模式、没有一致性，没有完整性验证，这导致大量项目的失败。</li>
<li>Node出现使得Javascript风靡一时，你必须前后端使用同一种语言，让一切都是异步的。但是javascript本身并不完善，没有命名空间，混乱的作用域，弱类型等等。导致需要用各种额外框架，CoffeeScript，然后是Babel、Webpack、TypeScript、React + JSX等等。</li>
<li>单页面应用（Single Page Application）变得流行，但是你需要在flux、redux、alt、reflux、flummox、fluxible、fluxxor、marty.js、fynx、MacFly、DeLorean.js、fluxify、fluxury、exim、fluxtore、Redx、fluxx等之间做出选择。</li>
<li>客户端突然需要所有数据了，于是GraphQL诞生了。这导致了服务端渲染的兴起，也就是所谓的带有额外步骤的CGI。结果证明，这增加了巨大的复杂性，导致了大量失败的项目和金钱的浪费。</li>
<li>“一切都应该是微服务”的观点变得主流，每个小网站都应该有一个restful API的Docker容器，一个用于前端，一个用于数据库。然后不断增加层级。接着为了更好通信，显然需要一个消息队列，ZeroMQ、RabbitMQ……服务间要更好的交换格式，又有了Protobuf的gRPC。但是这只是让工作变得更加复杂，结果导致了云服务的诞生，你只需要托管然后购买这些服务就可以了，费用变成原来的10倍，但至少比你自己维护多10000倍的维护成本要好。</li>
<li>接着大数据开始流行，你要存储用户的所有行为，你的数据变得很庞大，即使不够大，你也得相信数据足够大。然后你需要某种形式的Dynamo数据湖，又或者是一个时间序列数据库等等。</li>
<li>程序运行变慢了？不是因为糟糕的程序设计，不是因为高并发的请求，而是因为语言！所以我们用GO和RUST来重写程序吧！</li>
</ul>
<p>作者最后总结，你需要新技术，云, 容器, nosql, go, rust 以及 js 构建的系统等。<strong>但是不需要每一项新技术</strong>，没有什么东西适用于所有情况（Nothing is ever needed for everything）。</p>
<p>这篇博文的评论区一位老哥也说的很棒，现在人们评价一个人技术好坏并不是看他解决的问题有多复杂，而是看他设计的系统有多复杂，这显然不是一个好趋势。<br><img src="/2023/06/26/2023/06/weekly-tech-blog-collection-202306026/hypecycle1.png"></p>
<h3 id="mycelite：一个SQLite扩展，它允许你将一个SQLite实例中的更改同步到另一个实例。"><a href="#mycelite：一个SQLite扩展，它允许你将一个SQLite实例中的更改同步到另一个实例。" class="headerlink" title="mycelite：一个SQLite扩展，它允许你将一个SQLite实例中的更改同步到另一个实例。"></a><a target="_blank" rel="noopener" href="https://mycelial.com/docs/get-started/quick-start/">mycelite：一个SQLite扩展，它允许你将一个SQLite实例中的更改同步到另一个实例。</a></h3><ul>
<li>下载mycelite拓展<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/mycelial/mycelite/releases/latest/download/aarch64-apple-darwin.tgz --output aarch64-apple-darwin.tgz</span><br><span class="line">tar -xvzf aarch64-apple-darwin.tgz</span><br></pre></td></tr></table></figure></li>
<li>配置SQLite写实例<ul>
<li>启动<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlite3</span><br></pre></td></tr></table></figure></li>
<li>加载插件<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.load ./libmycelite mycelite_writer</span><br></pre></td></tr></table></figure></li>
<li>打开一个数据库作为写实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.open writer.db</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>配置Mycelite：第一次使用Mycelite，需要进行加载和配置<ul>
<li>加载配置文件 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.load ./libmycelite mycelite_config</span><br></pre></td></tr></table></figure></li>
<li>注册账号获取user name和secret <a target="_blank" rel="noopener" href="https://hub.mycelial.com/signup">https://hub.mycelial.com/signup</a></li>
<li>执行插入语句，填入user name和secret<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> mycelite_config <span class="keyword">values</span> </span><br><span class="line">  (<span class="string">&#x27;domain&#x27;</span>, <span class="string">&#x27;&lt;domain&gt;/&lt;db-name&gt;&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;client_id&#x27;</span>, <span class="string">&#x27;&lt;your-hub-username&gt;&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;secret&#x27;</span>, <span class="string">&#x27;&lt;secret-from-hub&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>配置SQLite读实例<ul>
<li>启动<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlite3</span><br></pre></td></tr></table></figure></li>
<li>加载插件<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.load ./libmycelite mycelite_reader</span><br></pre></td></tr></table></figure></li>
<li>打开一个数据库作为读实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.open reader.db</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>验证同步<ul>
<li>在写实例执行插入语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test(number <span class="type">integer</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test(number) <span class="keyword">values</span> (<span class="number">42</span>);</span><br></pre></td></tr></table></figure></li>
<li>在读实例就能看到数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.tables</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/" class="post-title-link" itemprop="url">每日文章收集-20230621</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-20 16:19:48" itemprop="dateCreated datePublished" datetime="2023-06-20T16:19:48+08:00">2023-06-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-26 11:00:15" itemprop="dateModified" datetime="2023-06-26T11:00:15+08:00">2023-06-26</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天尝试下详细介绍一篇有意思的博文，和若干篇值得一看的技术资讯。</p>
<h1 id="今日关注"><a href="#今日关注" class="headerlink" title="今日关注"></a>今日关注</h1><h2 id="同时在三个平台上发布我的独立游戏，在财务上却失败了"><a href="#同时在三个平台上发布我的独立游戏，在财务上却失败了" class="headerlink" title="同时在三个平台上发布我的独立游戏，在财务上却失败了"></a><a target="_blank" rel="noopener" href="https://juicybeast.com/2016/01/11/releasing-an-indie-game-on-3-consoles-at-once-and-failing-financially/#2-years">同时在三个平台上发布我的独立游戏，在财务上却失败了</a></h2><p>作者讲述了自己在2013到2015年开发了一款独立游戏，叫做<a target="_blank" rel="noopener" href="https://store.steampowered.com/app/342920/Toto_Temple_Deluxe/">Toto Temple</a>，并在2015年9月在PS4, Xbox One, Wii U 和 Steam上发布，最终销售额却不佳，作者回顾这一段经历，并分析可能的原因。</p>
<h3 id="销售额"><a href="#销售额" class="headerlink" title="销售额"></a>销售额</h3><p>下图是销售额和开发成本的对比。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/revenues.png"><br>左边是各个平台的销售占比，右边是成本，包括了市场营销，代码开发，移植，图形开发等。到作者发文时，游戏总共卖出了6000份，远远达不到他的开发成本。</p>
<h3 id="为什么这个游戏开发了两年？"><a href="#为什么这个游戏开发了两年？" class="headerlink" title="为什么这个游戏开发了两年？"></a>为什么这个游戏开发了两年？</h3><p>作者说到开发过程中并没有什么具体的规划，只是抓住了各种机遇。</p>
<p>他回顾了第一年获得了<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Ouya">Ouya</a>公司(Ouya是2013年成立的一个游戏机公司，已在2019年倒闭)的投资，几乎没花任何自己的钱上线了Toto Temple Deluxe版本。并且初期反馈也相当不错，这让他觉得很有成就感。</p>
<p>第二年作者和三大平台的游戏巨头进行了接触，并且获得了认可。然而由于游戏已在ouya发行，因此无法获得另一份的独占协议。这种情况下，他的开发团队决定在三大平台发行游戏，基于两点考虑：</p>
<ul>
<li>三个平台可以获得三倍销售额。</li>
<li>同时在三大平台发行可以获得一定的关注，并能够和三大平台的老总进行对话。</li>
</ul>
<h3 id="这个游戏真的好玩吗？"><a href="#这个游戏真的好玩吗？" class="headerlink" title="这个游戏真的好玩吗？"></a>这个游戏真的好玩吗？</h3><p>游戏的玩法基于多人合作对抗的形式，可以和小伙伴一起在家里玩。作者认为游戏是好玩的，他也放出来一段在游戏展会上玩家玩的很开心的视频。</p>
<h3 id="游戏玩法分析"><a href="#游戏玩法分析" class="headerlink" title="游戏玩法分析"></a>游戏玩法分析</h3><p>作者不认为游戏销量不佳是因为游戏不好玩。不过他也说到这款游戏在玩法上和别的多人游戏的不同。</p>
<ul>
<li>对于新手不友好。游戏上手难度颇高，需要一定的时间适应它的移动方式，除此之外，获胜方式也不那么直观，不是一键击杀或者到达某个点，而是要不断将山羊带到正确的点获取得分。</li>
<li>画面展示。游戏不好上手或者有难度也不是主要原因，毕竟很多游戏就靠着难度获得乐趣。但是这款游戏的画面往往让新手搞不清楚发生甚么，太过于杂乱而没有重点。即使玩家搞清楚了画面重点，观众也get不到，<strong>这一点颇为重要，这个致命的缺陷导致游戏无法在youtube或twitch等平台上流行起来。</strong><br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/tototemple.png"></li>
<li>强度变化。多数其他游戏在高强度的击杀或者阶段获胜后会有一段比较轻松的时间，以让玩家获得喘息。但是toto temple需要玩家一直保持高度注意力，直到这一局的最终获胜，因此也让开发者不得不将每局游戏的时间设计到在两分钟以内结束。</li>
</ul>
<p>这些玩法因素可能不是导致游戏销量失败的主要原因，但确实让玩家的游玩感受不太友好。</p>
<h3 id="主题，标题和预告片分析"><a href="#主题，标题和预告片分析" class="headerlink" title="主题，标题和预告片分析"></a>主题，标题和预告片分析</h3><p>主题，标题和预告片这三个因素决定了玩家是不是会对你的游戏感兴趣。作者认为自己在这方面没有做好。</p>
<ul>
<li><strong>主题过时</strong>。游戏主题是玛雅神庙寻宝，作者后悔没有在初次讨论后重新决定主题，因为这个主题显然无法引起太多玩家的兴趣，玩家在进入游戏前就大概知道玛雅，神庙，寻宝这样的主题会是什么样的，因此会丧失探索的欲望，直接影响玩家的购买欲。</li>
<li><strong>标题混淆</strong>。在初次讨论标题的时候，作者的团队认为标题一定要足够吸引人，因此采用了连续的T开头的单词。而这个标题也确实不太差，很快的在google上有了一定的搜索量。然而随着时间推移，作者意识到，这个标题完全没有展现出玩法，尤其是加上“deluxe（豪华版）”之后，让很多的玩家怀疑这是一个小品级的解谜游戏。这导致了很多潜在玩家的流失。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/deluxe_puzzle.png"></li>
<li><strong>预告片差强人意</strong>。作者分析了自己的两段预告片，指出由于游戏玩法的复杂性，让他非常渴望在预告片中告诉玩家游戏机制和所有的内容，使得预告片画面切换太快，也太过混乱。作者甚至还介绍了另一篇<a target="_blank" rel="noopener" href="http://www.kertgartner.com/making-entertaining-and-engaging-video-game-trailers/">文章</a>，用于说明如何制作一个吸引人的预告片。</li>
</ul>
<h3 id="市场营销"><a href="#市场营销" class="headerlink" title="市场营销"></a>市场营销</h3><p>作者说自己并没有太多市场营销的经验，但是也为这款游戏努力做了很多自己以前不曾做过的事。包括参展，公关，真山羊活动，在twitch上组织抽奖活动等。</p>
<ul>
<li>Pax展会上支付公关费。公关公司很厚道的给了他们一个折扣价，但是不管由于主观还是客观原因，最终没有任何网站和他们进行接触。</li>
<li>免费发放了价值17000美元的steam key。确实吸引了很多的玩家，但没有得到足够的媒体关注，因此宣传效果非常有限。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/pax_showdown_banner.png"></li>
<li>真山羊活动。购买者花费60美元可以获得4份游戏的steam key，同时在慈善网站上以玩家的名义购买一只山羊。然而这个公益性质的活动没有卖出任何一份，究其原因，作者认为有几个：<ul>
<li>显而易见，价格过高。尽管60美元也只是刚好够买一只山羊，是纯公益的活动，但是玩家并不会因为公益性质就更愿意购买。</li>
<li>只能在PC上组织这个活动，在更流行的主机上无法发起。</li>
<li>游戏不支持多人在线游玩，线下一份游戏就可以四人同时玩，因此购买四份游戏对于玩家来说意义不大。</li>
</ul>
</li>
<li>组织机器人赌注比赛。在twitch上发起了一场活动，由四个AI机器人控制角色进行游戏，而观众则是在游戏开始前下注哪个机器人能赢，赌赢的观众可以免费获得一份游戏的steam key。这场活动最终送出了1400份steam key，作者认为这是个有意思的活动，尽管最后并没有给销量带来什么帮助。</li>
<li>游戏客串角色。在游戏里可以解锁各种其他游戏里的不同角色造型，以替换山羊的造型。这个新的功能给游戏带来了海量的新角色，直到今天依然有更新。很难计算这个功能带来了多少曝光量，但作者对于这个功能确实非常满意。</li>
<li>新闻系统。这个指的是所有获得免费steam key的玩家需要提供他们的邮箱以订阅开发团队的新闻。最后统计出了有1437个人订阅了邮件，34%的人打开阅读了邮件，5%的人点击了它。这个结果也还算不错。</li>
</ul>
<h3 id="所以为什么游戏卖的不好呢？"><a href="#所以为什么游戏卖的不好呢？" class="headerlink" title="所以为什么游戏卖的不好呢？"></a>所以为什么游戏卖的不好呢？</h3><p>可以看到，作者认为游戏还挺好玩的，玩家也充分的参与到了他们组织的各种市场营销活动中，也通过公关公司接触了一些媒体。所以到底是为什么这个游戏卖的不好呢？作者简单说了几点：</p>
<ul>
<li><strong>不够吸引人</strong>。像前文所述，不管是主题还是玩法，都使得玩家难以第一时间了解游戏的魅力。</li>
<li><strong>没有线上模式</strong>。作者团队认为这是最大的原因，游戏需要现实中的朋友来一起玩，这是一个很大的限制。在论坛上也充斥着这样的讨论。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/no-online.png"></li>
<li><strong>开发周期过长</strong>。在2014年的时候，本地的多人游戏还是比较时兴的，但是这种游戏没多久就过时了，已经没人玩这种类型的游戏了。</li>
<li><strong>同时在三大平台发行</strong>。移植到各个平台花费了他们大量的时间和精力，在这个过程中基本就是不断的修复bug，产生bug，修复bug。。。</li>
</ul>
<h3 id="如果有下次"><a href="#如果有下次" class="headerlink" title="如果有下次"></a>如果有下次</h3><ul>
<li><strong>不要搞本地多人游戏</strong>。本地多人游戏规划起来是很简单，但是太难市场推广了。</li>
<li><strong>先签协议</strong>。要跟游戏平台签下独占协议，这样会让后续简单很多。</li>
<li><strong>只发行一个平台</strong>。和上一条呼应，一次性在多个平台发行游戏成本太高，回报太少。</li>
<li><strong>从市场角度进行设计</strong>。分析市场需求非常重要，不要埋头苦想。作者推荐看Ryan Clark的的文章<a target="_blank" rel="noopener" href="https://www.gamedeveloper.com/business/what-makes-an-indie-hit-how-to-choose-the-right-design">《What Makes an Indie Hit》</a>进行学习。</li>
</ul>
<h3 id="结尾的话"><a href="#结尾的话" class="headerlink" title="结尾的话"></a>结尾的话</h3><p>这篇文章写的情真意切，看得出来作者对这个付出了两年心血的游戏感情复杂，有懊悔一些决定，有欣慰一些活动的成功，有感激团队成员的辛勤付出。而最终，不管是偏见还是事实，他认为游戏并不是不好玩，但确实是个失败的作品。作者写下这篇文章也是为了总结过去的失败教训，为下部作品积累经验。</p>
<p><strong>而我们做程序员的也应该学习到，开发水平的高低往往并不是决定你的项目成功的关键，最主要还是得搞清楚市场需要什么，这点是程序员的弱项，但是也是必须要解决的，否则只能是像作者这样浪费无数个两年。</strong></p>
<h1 id="博文一览"><a href="#博文一览" class="headerlink" title="博文一览"></a>博文一览</h1><h3 id="cryptopals-加密挑战"><a href="#cryptopals-加密挑战" class="headerlink" title="cryptopals 加密挑战"></a><a target="_blank" rel="noopener" href="https://cryptopals.com/">cryptopals 加密挑战</a></h3><p>帮助你了解现实世界中用到的加密算法的底层原理以及可能被攻击的方式。目前包含了总共66个挑战题目，从简单到难，对于计算机的加密算法感兴趣的同学可以看看。<br>以下是一些挑战的截图：<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/crypto1.png"><br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/crypto2.png"></p>
<h3 id="DevPod：开源，无需服务端，可复现的开发环境的codespaces"><a href="#DevPod：开源，无需服务端，可复现的开发环境的codespaces" class="headerlink" title="DevPod：开源，无需服务端，可复现的开发环境的codespaces"></a><a target="_blank" rel="noopener" href="https://devpod.sh/">DevPod：开源，无需服务端，可复现的开发环境的codespaces</a></h3><p>DevPod是一个用于创建可复现的开发者环境的工具。基本流程是通过git下载代码，根据devcontainer.json文件指定代码运行环境。对比docker，codespaces等，优点是开源，无需服务端，轻量级。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/devpod.png"></p>
<h3 id="所有配置文件都应该报告其所在位置"><a href="#所有配置文件都应该报告其所在位置" class="headerlink" title="所有配置文件都应该报告其所在位置"></a><a target="_blank" rel="noopener" href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/ReportConfigFileLocations?showcomments#comments">所有配置文件都应该报告其所在位置</a></h3><p>这篇文章指出大部分程序拥有不同的配置文件位置，有些在系统配置文件目录，有些在用户目录，这些程序都自认为将配置文件放在了大部分人知道的位置。这导致了系统中的程序一多，就会让管理员要搜索所有可能的位置去查找配置文件所在。（对于我来说，找配置文件就是google一下，局限就是必须得有网络。）<br>作者认为应该有一个统一直观的方式查到程序的配置文件位置，例如”program –help”。<br>这篇博文引起了一些讨论，大部分都认同，也有人提出不仅如此，同时配置文件也应该统一读取优先级的问题，有些配置以首次读取为准，有些配置又是最后一次配置为准，这就非常混乱。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/config1.png"></p>
<h3 id="哈佛的新计算机科学老师是一个聊天机器人"><a href="#哈佛的新计算机科学老师是一个聊天机器人" class="headerlink" title="哈佛的新计算机科学老师是一个聊天机器人"></a><a target="_blank" rel="noopener" href="https://www.independent.co.uk/tech/harvard-chatbot-teacher-computer-science-b2363114.html">哈佛的新计算机科学老师是一个聊天机器人</a></h3><p>哈佛计划采用基于chatgpt的聊天机器人用于教授计算机科学课程。哈佛教授David Malan认为机器人教学的好处至少有几点：</p>
<ul>
<li>一对一教学</li>
<li>7天24小时不间断</li>
<li>针对学生进行个性化教学</li>
</ul>
<h3 id="OpenResume-开源的简历生成器"><a href="#OpenResume-开源的简历生成器" class="headerlink" title="OpenResume: 开源的简历生成器"></a><a target="_blank" rel="noopener" href="https://www.open-resume.com/">OpenResume: 开源的简历生成器</a></h3><p>先看看具体效果，个人认为还是比较简洁美观的，可以持续关注。比起市面上一堆花里胡哨的简历，这种简历我认为更能看得下去，关键是<strong>免费</strong>。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/openresume1.png"><br>支持pdf导入已有简历，或者根据他的模版一步步建立。<br><img src="/2023/06/20/2023/06/weekly-tech-blog-collection-202306021/openresume2.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/" class="post-title-link" itemprop="url">一周文章收集-20230619</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-19 16:28:13" itemprop="dateCreated datePublished" datetime="2023-06-19T16:28:13+08:00">2023-06-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-20 16:08:06" itemprop="dateModified" datetime="2023-06-20T16:08:06+08:00">2023-06-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%B8%80%E5%91%A8%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">一周文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="OpenLLM：开源的大语言模型"><a href="#OpenLLM：开源的大语言模型" class="headerlink" title="OpenLLM：开源的大语言模型"></a><a target="_blank" rel="noopener" href="https://github.com/bentoml/OpenLLM">OpenLLM：开源的大语言模型</a></h2><p>通过OpenLLM，可以使用任何开源的大型语言模型进行推断，将其部署到云端或本地，以及构建强大的人工智能应用程序。<br>需要服务器安装python3.8或以上以及pip。</p>
<h4 id="安装命令"><a href="#安装命令" class="headerlink" title="安装命令"></a>安装命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openllm</span><br></pre></td></tr></table></figure>
<h4 id="验证是否安装正确"><a href="#验证是否安装正确" class="headerlink" title="验证是否安装正确"></a>验证是否安装正确</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ openllm -h</span><br></pre></td></tr></table></figure>

<h4 id="启动LLM服务器"><a href="#启动LLM服务器" class="headerlink" title="启动LLM服务器"></a>启动LLM服务器</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openllm start dolly-v2</span><br></pre></td></tr></table></figure>

<p>以上命令会在 <a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a> 发布一个前端页面。</p>
<h4 id="命令行中使用"><a href="#命令行中使用" class="headerlink" title="命令行中使用"></a>命令行中使用</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> OPENLLM_ENDPOINT=http://localhost:3000</span><br><span class="line">openllm query <span class="string">&#x27;Explain to me the difference between &quot;further&quot; and &quot;farther&quot;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>其中，语言模型是可以换的，包含<a target="_blank" rel="noopener" href="https://huggingface.co/docs/transformers/model_doc/flan-t5">flan-t5</a>，<a target="_blank" rel="noopener" href="https://github.com/databrickslabs/dolly">dolly-v2</a>等等。</p>
<h2 id="Nix初体验"><a href="#Nix初体验" class="headerlink" title="Nix初体验"></a><a target="_blank" rel="noopener" href="https://mtlynch.io/notes/nix-first-impressions/">Nix初体验</a></h2><p><a target="_blank" rel="noopener" href="https://nix.dev/">Nix</a>是一种采用独特方法进行软件包管理和系统配置的工具。作者介绍了之前使用过的<a target="_blank" rel="noopener" href="https://github.com/saltstack/salt">Salt</a>和<a target="_blank" rel="noopener" href="https://github.com/ansible/ansible">Ansible</a>。关于这两者的对比，可以看这篇文章<a target="_blank" rel="noopener" href="https://www.redhat.com/en/topics/automation/ansible-vs-salt">Ansible vs Salt</a>。</p>
<p>对于Salt和Ansible完全不了解的小伙伴可以看下chatGPT的介绍，足够简洁了。<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/ansible_vs_salt.png"></p>
<p>作者介绍了Nix的多个好处，包括快速搭建，可本地部署，原子级修改等等。同时也说到Nix目前文档不足，想要用好Nix需要具备非常丰富的经验。最后也写了几个成功和失败的部署经验。</p>
<h2 id="PostgreSQL重新考虑其基于进程的模型"><a href="#PostgreSQL重新考虑其基于进程的模型" class="headerlink" title="PostgreSQL重新考虑其基于进程的模型"></a><a target="_blank" rel="noopener" href="https://lwn.net/SubscriberLink/934940/3abb2d4086680b78/">PostgreSQL重新考虑其基于进程的模型</a></h2><p>这条新闻需要了解的前提是，PostgreSQL是一个多进程的数据库，在一个运行的PostgreSQL实例中，会有多个进程同时运行来协同完成不同的任务和处理多个客户端连接。</p>
<p>而今年六月初，PostgreSQL的重要贡献者之一Heikki Linnakangas提议将PostgreSQL改为基于线程的模型。他的理由如下：</p>
<ul>
<li>进程模型已经不适应时代的发展，尤其不适用于大型机器。</li>
<li>进程的上下文切换开销过大，他认为这种开销以后还会继续增大，导致将花费大量时间在TLB缺失上。</li>
<li>进程模型对开发造成了成本，迫使项目维护大量重复的代码，包括几个在单一地址空间中不需要的内存管理机制。</li>
<li>他认为线程模型没有如上问题。</li>
</ul>
<p>这个提议在论坛上引发大量讨论，首先就是认为这种涉及底层的更改会带来灾难性的后果，导致大量bug，使得现存的很多项目都无法运行。另外，这种转变为线程的好处是否足够明显，在转变初期，必然是线程和进程模式并存的方式，在这种情况下，是否有足够的动力让开发人员转变为线程方式。</p>
<p>这个问题的提出值得深思，一些古老的代码语言和框架，随着时代的发展，其底层架构很可能已经不适合现代了，但是整体大修的成本过高，带来的好处又不一定明显，对现有项目的运行却可能是灾难性的。这种事情曾在PHP6上发生过，PHP6尝试重构了字符串的底层实现，结果非常糟糕，使得PHP的发展几乎停滞了十年，最后重新发布了PHP7，字符串回归了PHP5的实现。</p>
<h2 id="MVC不是MVC"><a href="#MVC不是MVC" class="headerlink" title="MVC不是MVC"></a><a target="_blank" rel="noopener" href="https://collindonnell.com/mvc-isnt-mvc">MVC不是MVC</a></h2><p>如今众所周知的MVC设计模式来源于1979年Xerox PARC的一名雇员Trygve Reenskaug在一篇论文中提出的，其原文仅500字，描述了每个部分的功能和作用，简单概括下就是：</p>
<ul>
<li>Models（模型）：应用程序中表示用于组织应用程序数据的抽象部分。模型的每个部分应该表示问题的一部分。当模型的数据发生变化时，模型会通知视图。</li>
<li>Views（视图）：模型的可视化表示。视图通过直接查询模型进行更新，并且会收到模型的更新通知。视图可以直接更新其模型。视图不应直接了解键盘和鼠标事件等事物。</li>
<li>Controllers（控制器）：用户和系统之间的连接。在屏幕上安排视图，接收用户输入，将消息传递给视图，并更新模型。</li>
</ul>
<p>另外他还定义了一个特殊的控制器叫Editor：</p>
<ul>
<li>Editors（编辑器）：一种控制器，它临时插入在控制器和视图之间用于编辑。如果你想象一个联系人应用程序，当用户点击编辑时，可能会创建一个编辑器，然后在保存或取消时被丢弃，并根据需要更新模型。编辑器允许用户对数据进行修改，提供临时的编辑环境，并在编辑完成后将更改传递给模型。</li>
</ul>
<p>在Reenskaug的设想里，MVC的每个部分都发挥着重要作用，其运作方式如下图：<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/mvc1.png"></p>
<h4 id="MVC概念转变"><a href="#MVC概念转变" class="headerlink" title="MVC概念转变"></a>MVC概念转变</h4><p>如今概念里的MVC和他的最初定义已经大相径庭，苹果风格的MVC如下：<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/mvc2.png"><br>可以看出，View和Model的作用被大幅削弱，只是被动的给controller提供用户行为和数据，一切更新操作都由Controller来控制。</p>
<p>在1990年代，java的开发者提出一种新的MVC模型，叫Model-2，在这个模型里多了http的请求，请求经过controller，然后通过controller来返回view。<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/mvc3.jpeg"></p>
<p>可以看出，如今耳熟能详的MVC跟一开始的MVC已经完全不同，只是保留了模型中的三个概念，每个概念发挥的作用却已经完全不同。</p>
<h2 id="AI带来了60年以来的第一种新的用户交互方式"><a href="#AI带来了60年以来的第一种新的用户交互方式" class="headerlink" title="AI带来了60年以来的第一种新的用户交互方式"></a><a target="_blank" rel="noopener" href="https://www.nngroup.com/articles/ai-paradigm/">AI带来了60年以来的第一种新的用户交互方式</a></h2><p>ChatGPT和其他AI系统带来了在计算机历史上的第三种用户交互方式。<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/UI-paradigm.jpeg"></p>
<h4 id="第一种交互方式：批处理进程"><a href="#第一种交互方式：批处理进程" class="headerlink" title="第一种交互方式：批处理进程"></a>第一种交互方式：批处理进程</h4><p>在1945年计算机诞生之初，用户需要通过在打孔卡片上输入一系列需要计算机完成的完整工作流程，来让计算机一次性完成。用户体验当然是非常糟糕的，在计算机执行完任务之前，用户和计算机之间无法有任何其他交互。而每次结果出来往往需要隔天才能拿到，用户根据结果对打孔卡片进行调整，继续执行用户，最终要数天才能执行完成一个任务。</p>
<h4 id="第二种交互方式：基于命令的交互设计"><a href="#第二种交互方式：基于命令的交互设计" class="headerlink" title="第二种交互方式：基于命令的交互设计"></a>第二种交互方式：基于命令的交互设计</h4><p>大约在1964年，时分共享的出现（通过连接的终端使多个用户共享一台大型机）引导了第二种用户界面范式：基于命令的交互。这个时候，用户的输入可以得到计算机的反馈，从而调整自己的命令输入，而且可以精细到每次只用输入一行命令。包括dos的命令行界面，全屏文本终端（IBM），图形化界面都是属于这种交互方式。</p>
<h4 id="第三种交互方式：意图导向的交互方式"><a href="#第三种交互方式：意图导向的交互方式" class="headerlink" title="第三种交互方式：意图导向的交互方式"></a>第三种交互方式：意图导向的交互方式</h4><p>在AI模型下，你不用像过去那样告诉计算机<strong>做什么</strong>，而是直接告诉计算机<strong>你想要什么</strong>。作者举了个例子，比如你想要如下一幅画，</p>
<blockquote>
<p>为一本低俗科幻杂志的封面绘制一幅合适的插图，画面中展示了一个穿着太空服的牛仔在一个无氧行星上，天空中有两颗红色的月亮。</p>
</blockquote>
<p>在AI出现之前，你需要在photoshop上进行大量的操作来达到你的意图，而如今你直接告诉AI就可以。<br><img src="/2023/06/19/2023/06/weekly-tech-blog-collection-202306019/redmoon.jpeg"></p>
<p>作者认为，未来的人工智能系统很可能会采用混合用户界面，结合意图导向和基于命令的界面元素，同时保留许多图形用户界面的元素。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/" class="post-title-link" itemprop="url">一周文章收集-20230604</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-04 12:00:00" itemprop="dateCreated datePublished" datetime="2023-06-04T12:00:00+08:00">2023-06-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-09 23:43:03" itemprop="dateModified" datetime="2023-06-09T23:43:03+08:00">2023-06-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%B8%80%E5%91%A8%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">一周文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="为什么你应该继续使用telnet"><a href="#为什么你应该继续使用telnet" class="headerlink" title="为什么你应该继续使用telnet"></a><a target="_blank" rel="noopener" href="https://bash-prompt.net/guides/telnet/">为什么你应该继续使用telnet</a></h2><p>随着ssh的盛行，telnet几乎已经被程序员抛弃了，但是在某些情况下，telnet可以帮你排查各种网络问题。这篇文章告诉你怎么使用telnet。</p>
<h2 id="自动驾驶在消亡"><a href="#自动驾驶在消亡" class="headerlink" title="自动驾驶在消亡"></a><a target="_blank" rel="noopener" href="https://www.understandingai.org/p/the-death-of-self-driving-cars-is">自动驾驶在消亡</a></h2><p>这篇文章给出了不同于主流观点的对自动驾驶的看法，介绍了一些在自动驾驶行业在逐渐退去热度的迹象。包括比如Uber在2020年出售了自动驾驶业务，Lyft在2021年停止了开发。总而言之，比起在2015到2017年左右对于自动驾驶的预期来说，目前的自动驾驶行业发展远远未达到人们的预期。</p>
<h2 id="火车轨道上的石头是干嘛用的"><a href="#火车轨道上的石头是干嘛用的" class="headerlink" title="火车轨道上的石头是干嘛用的"></a><a target="_blank" rel="noopener" href="https://www.alpharail.co.nz/why-do-railway-tracks-have-crushed-stones-alongside-them/">火车轨道上的石头是干嘛用的</a></h2><p>铁轨上的石头尖锐而坚固，这篇文章介绍了为何需要在铁轨上铺设石头，简而言之，石头可以帮助减震，帮助承受火车经过时产生的巨大冲击力。</p>
<h2 id="Chirper-ai：一个完全由AI机器人参与的社交媒体"><a href="#Chirper-ai：一个完全由AI机器人参与的社交媒体" class="headerlink" title="Chirper.ai：一个完全由AI机器人参与的社交媒体"></a><a target="_blank" rel="noopener" href="https://www.fry-ai.com/p/social-media-no-humans-allowed">Chirper.ai：一个完全由AI机器人参与的社交媒体</a></h2><p>在这个<a target="_blank" rel="noopener" href="https://chirper.ai/">网站</a>通过指定一个昵称和描述一下这个机器人的设定，后台就会自动生成一个机器人，参与社交媒体的内容创作和互动。<br><img src="/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/social_AI_1.png"><br>这个机器人会按照你的设定来进行内容创作，会去关注和回复其他机器人。并且拥有独立的性格和情感。<br><img src="/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/social_AI_2.png"><br>有些互动让人感到颇为惊讶。<br><img src="/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/social_AI_3.png"></p>
<h2 id="google官方的免费创造性AI课程"><a href="#google官方的免费创造性AI课程" class="headerlink" title="google官方的免费创造性AI课程"></a><a target="_blank" rel="noopener" href="https://www.cloudskillsboost.google/journeys/118">google官方的免费创造性AI课程</a></h2><p>目前包含十节课，介绍了大语言模型，图像生成模型等等，学习门槛较高，需要英语能力和梯子。</p>
<h2 id="封闭模型训练数据的来源令人担忧"><a href="#封闭模型训练数据的来源令人担忧" class="headerlink" title="封闭模型训练数据的来源令人担忧"></a><a target="_blank" rel="noopener" href="https://simonwillison.net/2023/Jun/4/closed-model-training/">封闭模型训练数据的来源令人担忧</a></h2><p>这篇文章描述了作者对于封闭模型的训练数据来源的担忧，比如copilot可能取用github上用户的代码，google的人工智能模型bard也曾经提及他们的数据可能来自gmail。</p>
<h2 id="RARBG-IPFS：搜索IPFS资源"><a href="#RARBG-IPFS：搜索IPFS资源" class="headerlink" title="RARBG IPFS：搜索IPFS资源"></a><a target="_blank" rel="noopener" href="https://ipfs.io/ipfs/QmbpRxBZ5HDZDVRoeAU8xFYnoP4r5eGCxdkmfFW3JbA6mq/">RARBG IPFS：搜索IPFS资源</a></h2><p>如果不知道什么是IPFS（The InterPlanetary File System 星际传输文件系统），看下这个<a target="_blank" rel="noopener" href="https://docs.ipfs.tech/">https://docs.ipfs.tech/</a>，有点类似以前的磁力链接，是去中心化趋势中的产物。下载客户端就意味着你的机器成为一台IPFS的资源主机，可用的下载链接将会在网络上进行传播。可以看看下面的这个图片里的讨论.<br><img src="/2023/06/04/2023/06/weekly-tech-blog-collection-20230604/IPFS.png"></p>
<h2 id="privateGPT-可以在本地实现问答的聊天机器人"><a href="#privateGPT-可以在本地实现问答的聊天机器人" class="headerlink" title="privateGPT:可以在本地实现问答的聊天机器人"></a><a target="_blank" rel="noopener" href="https://github.com/SamurAIGPT/privateGPT">privateGPT:可以在本地实现问答的聊天机器人</a></h2><p>通过利用本地LLM的能力，在不依赖于互联网的情况下创建一个基于您的文档的问答聊天机器人。确保完全的隐私和安全性，因为您的数据永远不会离开本地执行环境。即使没有互联网连接，也可以无缝地处理和查询您的文档。</p>
<h2 id="Arroyo：一个用Rust编写的分布式流处理引擎"><a href="#Arroyo：一个用Rust编写的分布式流处理引擎" class="headerlink" title="Arroyo：一个用Rust编写的分布式流处理引擎"></a><a target="_blank" rel="noopener" href="https://github.com/ArroyoSystems/arroyo">Arroyo：一个用Rust编写的分布式流处理引擎</a></h2><p>简而言之，Arroyo使您能够对高容量实时数据提出复杂问题，并获得亚秒级的结果。相比起世面已存在的流引擎（Apache Flink、Spark Streaming和Kafka Streams），Arroyo有如下特点，是无服务的，高性能SQL，以及为非专家设计。</p>
<h2 id="黑镜导演利用chatGPT进行剧本创作"><a href="#黑镜导演利用chatGPT进行剧本创作" class="headerlink" title="黑镜导演利用chatGPT进行剧本创作"></a><a target="_blank" rel="noopener" href="https://www.empireonline.com/tv/news/charlie-brooker-chatgpt-black-mirror-episode-exclusive-image/">黑镜导演利用chatGPT进行剧本创作</a></h2><p>英剧《黑镜》系列是关于在未来，科技的发展对于人类造成危害。因此，当黑镜的导演用chatGPT创作故事时，整个事情听上去就颇为黑色幽默。不过最后导演说chatGPT的故事只是初看起来合理，仔细琢磨之后狗屁不通。</p>
<h2 id="fastgen：一个低代码工具，以进行快速开发"><a href="#fastgen：一个低代码工具，以进行快速开发" class="headerlink" title="fastgen：一个低代码工具，以进行快速开发"></a><a target="_blank" rel="noopener" href="https://fastgen.com/">fastgen：一个低代码工具，以进行快速开发</a></h2><p>Fastgen是一个低代码软件平台，允许用户快速轻松地构建API端点和工作流程。Fastgen提供直观友好的界面，无需深入的编程知识即可创建API和工作流程。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/06/02/2023/06/weekly-tech-blog-collection-20230602/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/02/2023/06/weekly-tech-blog-collection-20230602/" class="post-title-link" itemprop="url">一周文章收集-20230602</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-02 14:52:13" itemprop="dateCreated datePublished" datetime="2023-06-02T14:52:13+08:00">2023-06-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-06-03 08:47:19" itemprop="dateModified" datetime="2023-06-03T08:47:19+08:00">2023-06-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%B8%80%E5%91%A8%E6%96%87%E7%AB%A0%E6%94%B6%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">一周文章收集</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="radiation-hardened-quine-即使删除代码中任意字符，代码仍可以修正并运行"><a href="#radiation-hardened-quine-即使删除代码中任意字符，代码仍可以修正并运行" class="headerlink" title="radiation-hardened-quine: 即使删除代码中任意字符，代码仍可以修正并运行"></a><a target="_blank" rel="noopener" href="https://github.com/mame/radiation-hardened-quine">radiation-hardened-quine: 即使删除代码中任意字符，代码仍可以修正并运行</a></h2><p>一个健壮的开源项目，如标题所述，可以修正错误的ruby代码，在缺少任一字符的情况下仍能正常运行。这个是有点神奇，细想一下要实现这样的算法并不是那么容易。感兴趣的可以研究下。</p>
<h2 id="如何使用R和OpenStreetMap制作精美的公路旅行地图"><a href="#如何使用R和OpenStreetMap制作精美的公路旅行地图" class="headerlink" title="如何使用R和OpenStreetMap制作精美的公路旅行地图"></a><a target="_blank" rel="noopener" href="https://www.andrewheiss.com/blog/2023/06/01/geocoding-routing-openstreetmap-r/">如何使用R和OpenStreetMap制作精美的公路旅行地图</a></h2><p>作者利用R语言和开源项目<a target="_blank" rel="noopener" href="https://www.openstreetmap.org/">OpenStreetMap</a>来绘制和家庭的旅程地图，就最后的呈现效果来说，个人觉得比较一般。<br><img src="/2023/06/02/2023/06/weekly-tech-blog-collection-20230602/openstreetmap.png"></p>
<h2 id="SHOW-HN：通过简历自动搜寻合适的工作"><a href="#SHOW-HN：通过简历自动搜寻合适的工作" class="headerlink" title="SHOW HN：通过简历自动搜寻合适的工作"></a><a target="_blank" rel="noopener" href="https://hnresumetojobs.com/">SHOW HN：通过简历自动搜寻合适的工作</a></h2><p>据称通过AI分析你的简历，然后搜寻合适的工作。随便试了下，结果出来的很快，快的让人觉得不太像经过AI分析。评论里也说到担心隐私的问题，谨慎使用吧。</p>
<h2 id="WITCH：一款用于替换macOS切屏的软件"><a href="#WITCH：一款用于替换macOS切屏的软件" class="headerlink" title="WITCH：一款用于替换macOS切屏的软件"></a><a target="_blank" rel="noopener" href="https://manytricks.com/witch/">WITCH：一款用于替换macOS切屏的软件</a></h2><p>不仅可以在应用间切换，也可以在窗口和tab页之间切换，能够绑定到不同的按键，以更方便的进行不同的切换。</p>
<h2 id="MERCURY：一款可以将python代码转换为网页应用的软件"><a href="#MERCURY：一款可以将python代码转换为网页应用的软件" class="headerlink" title="MERCURY：一款可以将python代码转换为网页应用的软件"></a><a target="_blank" rel="noopener" href="https://runmercury.com/">MERCURY：一款可以将python代码转换为网页应用的软件</a></h2><p>通过在python当中调用MERCURY的API，就可以实现对于网页应用的转换。</p>
<h2 id="brute-fail-一个实时记录当前世界上用各种用户名密码组合进行非法入侵的尝试"><a href="#brute-fail-一个实时记录当前世界上用各种用户名密码组合进行非法入侵的尝试" class="headerlink" title="brute.fail: 一个实时记录当前世界上用各种用户名密码组合进行非法入侵的尝试"></a><a target="_blank" rel="noopener" href="https://brute.fail/">brute.fail: 一个实时记录当前世界上用各种用户名密码组合进行非法入侵的尝试</a></h2><p><img src="/2023/06/02/2023/06/weekly-tech-blog-collection-20230602/brute.fail.png"></p>
<h2 id="AITemplate-开源的AI推理框架"><a href="#AITemplate-开源的AI推理框架" class="headerlink" title="AITemplate: 开源的AI推理框架"></a><a target="_blank" rel="noopener" href="https://facebookincubator.github.io/AITemplate/">AITemplate: 开源的AI推理框架</a></h2><p>Meta公司推出的AI推理框架，可在Nvidia和AMD的GPU上进行运行。</p>
<h2 id="一种新的攻击可以在任何主要浏览器上揭开匿名用户的面纱"><a href="#一种新的攻击可以在任何主要浏览器上揭开匿名用户的面纱" class="headerlink" title="一种新的攻击可以在任何主要浏览器上揭开匿名用户的面纱"></a><a target="_blank" rel="noopener" href="https://www.wired.com/story/web-deanonymization-side-channel-attack-njit/">一种新的攻击可以在任何主要浏览器上揭开匿名用户的面纱</a></h2><p>由新泽西理工学院的工程师发现，黑客可以通过用户的行为来获取用户的信息，比如是否拒绝网站的使用cookie信息和是否登陆的请求。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/04/24/2023/04/how-to-receive-stream-data-in-fetch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/24/2023/04/how-to-receive-stream-data-in-fetch/" class="post-title-link" itemprop="url">使用fetchAPI获取post请求中的stream数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-04-24 16:03:35 / 修改时间：21:47:54" itemprop="dateCreated datePublished" datetime="2023-04-24T16:03:35+08:00">2023-04-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="问题起源"><a href="#问题起源" class="headerlink" title="问题起源"></a>问题起源</h1><ul>
<li>希望用miniprogram实现调用chatGPT接口</li>
<li>miniprogram国内直接调用api.openai.com接口不通，需要国外购买服务器建站中转，即miniprogram-国外服务器-openai接口来实现</li>
<li>miniprogram线上环境无法调用任何没在国内备案的网站，因此无法通过上述中转方案实现</li>
<li>有两套替代方案，购买国内备案服务器，或者直接使用miniprogram云托管来实现，选择了后者，因为无需备案</li>
<li>miniprogram云托管中转调用国外服务器，再调用openai接口，可以实现</li>
<li>miniprogram云托管单个接口最大返回时间固定为15秒，而openai接口的完整数据返回往往大于这个时间</li>
<li>通过设定接口参数 <code>stream:true</code> 来实现流式传输，即接口数据可以先部分返回，通过长连接持续传输</li>
<li>流式传输有两种方案，<code>Server-Sent Events</code> 和 <code>fetch stream</code></li>
</ul>
<h1 id="SSE（Server-sent-Event）方案实现"><a href="#SSE（Server-sent-Event）方案实现" class="headerlink" title="SSE（Server-sent Event）方案实现"></a>SSE（Server-sent Event）方案实现</h1><p>参考<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">mdn文档</a>和<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2017/05/server-sent_events.html">阮一峰sse教程</a></p>
<h3 id="创建一个EventSource实例"><a href="#创建一个EventSource实例" class="headerlink" title="创建一个EventSource实例"></a>创建一个EventSource实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> evtSource = <span class="keyword">new</span> EventSource(<span class="string">&quot;ssedemo.php&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> evtSource = <span class="keyword">new</span> EventSource(<span class="string">&quot;//api.example.com/ssedemo.php&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="监听返回数据"><a href="#监听返回数据" class="headerlink" title="监听返回数据"></a>监听返回数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">evtSource.onmessage = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newElement = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> eventList = <span class="built_in">document</span>.getElementById(<span class="string">&quot;list&quot;</span>);</span><br><span class="line"></span><br><span class="line">  newElement.textContent = <span class="string">`message: <span class="subst">$&#123;event.data&#125;</span>`</span>;</span><br><span class="line">  eventList.appendChild(newElement);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="定制监听事件"><a href="#定制监听事件" class="headerlink" title="定制监听事件"></a>定制监听事件</h3><p>在下述代码中，将会监听返回数据中事件字段中的<code>ping</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">evtSource.addEventListener(<span class="string">&quot;ping&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newElement = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> eventList = <span class="built_in">document</span>.getElementById(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> time = <span class="built_in">JSON</span>.parse(event.data).time;</span><br><span class="line">  newElement.textContent = <span class="string">`ping at <span class="subst">$&#123;time&#125;</span>`</span>;</span><br><span class="line">  eventList.appendChild(newElement);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="方法尝试结论"><a href="#方法尝试结论" class="headerlink" title="方法尝试结论"></a>方法尝试结论</h3><p>最终并不能实现需求，原因在于sse天生只支持get方式获取数据，对于post请求无法支持。<br><em><strong>另外发现miniprogram不支持server-sent events。</strong></em></p>
<h1 id="Fetch获取数据流"><a href="#Fetch获取数据流" class="headerlink" title="Fetch获取数据流"></a>Fetch获取数据流</h1><p>参考<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html">阮一峰fetch教程</a><br>核心处理方式就是利用fetch异步获取流的方式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reqData = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&quot;superman&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;https://example.com/api&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: reqData</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> reader = response.body.getReader();</span><br><span class="line"><span class="keyword">const</span> decoder = <span class="keyword">new</span> TextDecoder();</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;value, done&#125; = <span class="keyword">await</span> reader.read();</span><br><span class="line">    <span class="keyword">if</span> (done) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> str = decoder.decode(value);</span><br><span class="line">    <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样获取到的数据格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data: some text</span><br><span class="line">data: another message</span><br><span class="line">data: with two lines</span><br></pre></td></tr></table></figure>
<p>需要进行进一步的分析处理</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2023/04/12/2023/04/how_to_create_new_site/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/12/2023/04/how_to_create_new_site/" class="post-title-link" itemprop="url">Namcheap+CloudFlare简单建站</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-12 22:01:51" itemprop="dateCreated datePublished" datetime="2023-04-12T22:01:51+08:00">2023-04-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-04-17 12:36:27" itemprop="dateModified" datetime="2023-04-17T12:36:27+08:00">2023-04-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h3><ul>
<li>需要基于流量和内容进行选择，如果打算服务于国内，选择国内的服务器提供商，比如阿里云或者腾讯云等，如果需要某些国内服务器做不到的功能，比如调用openai的接口，则最好是买个国外的服务器。</li>
<li>需要注意的是，如果打算基于微信小程序或者公众号开发，必须要满足域名通过国家备案，而备案的必要条件是所在的服务器是国内供应商。因此如果是为了开发小程序而买了个国外服务器，最终很可能因为无法备案而无法满足你的需求。</li>
<li>无论国内外，最便宜的套餐普遍都是1核1G，20GB硬盘空间，1Mbps带宽。国外有Vultr，Linode，DigitalOcean，AWS Lightsail等，价格普遍在5美刀/月左右。国内可选择阿里云，百度云，腾讯云，华为云等，价格20-100元人民币/月不等。</li>
<li>如果是开发小程序和公众号，有另一种选择，跳过购买域名和服务器，直接使用腾讯的<a target="_blank" rel="noopener" href="https://cloud.weixin.qq.com/">云托管平台</a></li>
</ul>
<h3 id="购买域名和ssl证书"><a href="#购买域名和ssl证书" class="headerlink" title="购买域名和ssl证书"></a>购买域名和ssl证书</h3><p>需要注意，目前情况而言，购买域名的同时也几乎必须得购买ssl证书，因为现在http的网站已经不再被各大浏览器所推荐，流量优先级会被调低，甚至小程序直接不支持指向http网站，如果建站的目的是希望获得收入，那拥有ssl证书的https网站是必须的。</p>
<ul>
<li><p>国内</p>
<ul>
<li>易名中国：域名价格约为50元人民币/年起，SSL证书价格约为100元人民币/年起。</li>
<li>西部数码：域名价格约为60元人民币/年起，SSL证书价格约为100元人民币/年起。</li>
<li>新网：域名价格约为50元人民币/年起，SSL证书价格约为200元人民币/年起。</li>
<li>阿里云：域名价格约为60元人民币/年起，SSL证书价格约为300元人民币/年起。</li>
<li>巨牛网：域名价格约为50元人民币/年起，SSL证书价格约为150元人民币/年起。</li>
</ul>
</li>
<li><p>国外</p>
<ul>
<li>GoDaddy：域名价格约为$12/年起，SSL证书价格约为$70/年起。</li>
<li>Namecheap：域名价格约为$8/年起，SSL证书价格约为$9/年起。</li>
<li>Google Domains：域名价格约为$12/年起，SSL证书价格约为$20/年起。</li>
<li>Network Solutions：域名价格约为$35/年起，SSL证书价格约为$60/年起。</li>
<li>Name.com：域名价格约为$10/年起，SSL证书价格约为$9/年起。</li>
</ul>
</li>
</ul>
<h3 id="生成CSR"><a href="#生成CSR" class="headerlink" title="生成CSR"></a>生成CSR</h3><ul>
<li><p>什么是CSR</p>
<blockquote>
<p>CSR code (Certificate Signing Request) is a specific code and an essential part for the SSL activation. It contains information about website name and the company contact details. For many reasons, the code should be created on the hosting server end. On some servers, it is the obligatory condition.</p>
</blockquote>
<p>总之CSR是一段关于你网站的身份信息的加密文件，对于激活ssl证书是必须的，在服务器端生成。</p>
</li>
<li><p>通过openssl命令生成<br>有很多种方式生成csr文件，甚至有在线网站可以直接生成，通常不建议在线生成，因为csr是ssl的必要依赖，关联到网站的安全性，最好是不要冒泄露的风险。</p>
<ul>
<li>新建.key文件夹，执行如下命令<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install openssl</span><br><span class="line">cd .key</span><br><span class="line">openssl req -nodes -newkey rsa:2048 -keyout $serverName.key -out $serverName.csr</span><br></pre></td></tr></table></figure>
注意，$serverName用你的网站名替换，会生成两个文件，以你网站名为命名的key文件和csr文件。<br>生成时会要求你填入国家，公司，email等，根据提示填入。</li>
</ul>
<p><em><strong>国内域名商的流程会不太一样，因为是要备案实名制，所以还会要求身份证信息等，而且是界面操作，无需通过以上命令行</strong></em></p>
</li>
<li><p>复制csr文件中的内容，通常如下：<br><img src="/2023/04/12/2023/04/how_to_create_new_site/csr-content.png"><br>复制时要包含全部内容，不要略去BEGIN和END那一行。</p>
</li>
<li><p>将csr粘贴到域名供应商配置界面，以namecheap为例，在你已购买的ssl证书界面点击active。<br><img src="/2023/04/12/2023/04/how_to_create_new_site/activate_ssl.png"><br>将刚才csr文件中的内容粘贴到该界面中。<br><img src="/2023/04/12/2023/04/how_to_create_new_site/copy_csr.png"><br>下一步中选择Add CNAME record<br><img src="/2023/04/12/2023/04/how_to_create_new_site/act_dcv_choice.png"><br>下一步中输入你的电子邮箱</p>
</li>
<li><p>完成后进入证书管理界面，按照如下操作<br><img src="/2023/04/12/2023/04/how_to_create_new_site/act_done_1.png"><br>此时会获取到下一步会用到的cname的host和target<br><img src="/2023/04/12/2023/04/how_to_create_new_site/cname_content.png"></p>
</li>
</ul>
<h3 id="注册DNS"><a href="#注册DNS" class="headerlink" title="注册DNS"></a>注册DNS</h3><p>  一般的域名供应商都会提供有dns服务，namecheap也有，但是功能都比较基础，通常建议使用第三方DNS供应商。国外的有google，cloud flare，国内也有阿里，百度等。<br>  以cloudflare为例</p>
<ul>
<li>点击add site，输入你的域名，选择free计划</li>
<li>输入你的域名和服务器的公网ip</li>
<li>在namecheap中的namerserver界面选择Custom DNS，输入cloudflare提供的两个dns服务器地址<br><img src="/2023/04/12/2023/04/how_to_create_new_site/namecheap_dns.png"></li>
<li>进入cloudflare的dns管理界面，添加一条cname记录，输入之前步骤中得到的cname的host和target，注意Proxy status这一栏要改成DNS only<br><img src="/2023/04/12/2023/04/how_to_create_new_site/cloudflare_dns.png"></li>
<li><em><strong>到这一步之后，ssl证书发放商就会把ssl证书发到你的邮箱</strong></em>，按照官网的说法，这个时间可能24到48小时，一般用不了那么久，一小时内就可以收到，如果没收到，去namecheap的<a target="_blank" rel="noopener" href="https://decoder.link/">ssl校验网站</a>看下，如果有出错，那重新捋一遍上面的步骤。</li>
</ul>
<h3 id="安装SSL证书"><a href="#安装SSL证书" class="headerlink" title="安装SSL证书"></a>安装SSL证书</h3><ul>
<li>收到ssl证书后，通常发放邮件长下面这样，将邮件中的附件解压，包含三个文件，ca-bundle文件，crt文件和p7b文件<br><img src="/2023/04/12/2023/04/how_to_create_new_site/ssl_email.png"></li>
<li>将ca-bundle文件和crt文件上传到服务器，并执行如下命令<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat your_domain.crt &gt; your_domain_chain.crt ; <span class="built_in">echo</span> &gt;&gt; your_domain_chain.crt ; cat your_domain.ca-bundle &gt;&gt; your_domain_chain.crt</span></span><br></pre></td></tr></table></figure></li>
<li>服务器安装ssl证书的方式有很多种，最常用的方式是nginx，以nginx为例，安装完nginx之后，进入/etc/nginx/conf.d/目录，新增一个your_domain.conf配置文件，配置文件内容如下<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  www.example.com;</span><br><span class="line">    return 301 https:<span class="comment">//$server_name$request_uri;</span></span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    # 域名，多个以空格分开</span><br><span class="line">    server_name  www.example.com;</span><br><span class="line">    </span><br><span class="line">    # ssl证书地址</span><br><span class="line">    ssl_certificate     /home/.ssl/example.crt;  # crt文件的路径</span><br><span class="line">    ssl_certificate_key  /home/.key/example.key; # key文件的路径，即生成csr文件步骤中的key文件</span><br><span class="line">    </span><br><span class="line">    # ssl验证相关配置</span><br><span class="line">    ssl_session_timeout  5m;    #缓存有效期</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    #加密算法</span><br><span class="line">    ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;    #安全链接可选的加密协议</span><br><span class="line">    ssl_prefer_server_ciphers on;   #使用服务器端的首选算法</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http:<span class="comment">//localhost:8080/; # 服务器地址</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>启动nginx，即可在公网中访问到你的服务器了</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shdvgj.github.io/2022/07/08/read/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0-PartIV/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Ricky">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ricky的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/08/read/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0-PartIV/" class="post-title-link" itemprop="url">读书笔记-Redis设计与实现-PartIV</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-08 09:30:36" itemprop="dateCreated datePublished" datetime="2022-07-08T09:30:36+08:00">2022-07-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2023-03-16 16:44:04" itemprop="dateModified" datetime="2023-03-16T16:44:04+08:00">2023-03-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">读书笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-发布与订阅"><a href="#1-发布与订阅" class="headerlink" title="1.发布与订阅"></a>1.发布与订阅</h2><ul>
<li>服务器状态在pubsub_channels字典保存了所有频道的订阅关系：SUBSCRIBE命令负责将客户端和被订阅的频道关联到这个字典里面，而UNSUBSCRIBE命令则负责解除客户端和被退订频道之间的关联。</li>
<li>服务器状态在pubsub_patterns链表保存了所有模式的订阅关系：PSUBSCRIBE命令负责将客户端和被订阅的模式记录到这个链表中，而PUNSUBSCRIBE命令则负责移除客户端和被退订模式在链表中的记录。</li>
<li>PUBLISH命令通过访问pubsub_channels字典来向频道的所有订阅者发送消息，通过访问pubsub_patterns链表来向所有匹配频道的模式的订阅者发送消息。</li>
<li>PUBSUB命令的三个子命令都是通过读取pubsub_channels字典和pubsub_patterns链表中的信息来实现的。</li>
</ul>
<h2 id="2-事务"><a href="#2-事务" class="headerlink" title="2.事务"></a>2.事务</h2><ul>
<li>事务提供了一种将多个命令打包，然后一次性、有序地执行的机制。</li>
<li>多个命令会被入队到事务队列中，然后按先进先出（FIFO）的顺序执行。</li>
<li>事务在执行过程中不会被中断，当事务队列中的所有命令都被执行完毕之后，事务才会结束。</li>
<li>带有WATCH命令的事务会将客户端和被监视的键在数据库的watched_keys字典中进行关联，当键被修改时，程序会将所有监视被修改键的客户端的REDIS_DIRTY_CAS标志打开。</li>
<li>只有在客户端的REDIS_DIRTY_CAS标志未被打开时，服务器才会执行客户端提交的事务，否则的话，服务器将拒绝执行客户端提交的事务。</li>
<li>Redis的事务总是具有ACID中的原子性、一致性和隔离性，当服务器运行在AOF持久化模式下，并且appendfsync选项的值为always时，事务也具有耐久性。</li>
</ul>
<h2 id="3-Lua脚本"><a href="#3-Lua脚本" class="headerlink" title="3.Lua脚本"></a>3.Lua脚本</h2><ul>
<li>Redis服务器在启动时，会对内嵌的Lua环境执行一系列修改操作，从而确保内嵌的Lua环境可以满足Redis在功能性、安全性等方面的需要。</li>
<li>Redis服务器专门使用一个伪客户端来执行Lua脚本中包含的Redis命令。</li>
<li>Redis使用脚本字典来保存所有被EVAL命令执行过，或者被SCRIPT LOAD命令载入过的Lua脚本，这些脚本可以用于实现SCRIPT EXISTS命令，以及实现脚本复制功能。</li>
<li>EVAL命令为客户端输入的脚本在Lua环境中定义一个函数，并通过调用这个函数来执行脚本。</li>
<li>EVALSHA命令通过直接调用Lua环境中已定义的函数来执行脚本。</li>
<li>SCRIPT FLUSH命令会清空服务器lua_scripts字典中保存的脚本，并重置Lua环境。</li>
<li>SCRIPT EXISTS命令接受一个或多个SHA1校验和为参数，并通过检查lua_scripts字典来确认校验和对应的脚本是否存在。</li>
<li>SCRIPT LOAD命令接受一个Lua脚本为参数，为该脚本在Lua环境中创建函数，并将脚本保存到lua_scripts字典中。</li>
<li>服务器在执行脚本之前，会为Lua环境设置一个超时处理钩子，当脚本出现超时运行</li>
</ul>
<h2 id="4-排序"><a href="#4-排序" class="headerlink" title="4.排序"></a>4.排序</h2><ul>
<li>SORT命令通过将被排序键包含的元素载入到数组里面，然后对数组进行排序来完成对键进行排序的工作。</li>
<li>在默认情况下，SORT命令假设被排序键包含的都是数字值，并且以数字值的方式来进行排序。</li>
<li>如果SORT命令使用了ALPHA选项，那么SORT命令假设被排序键包含的都是字符串值，并且以字符串的方式来进行排序。</li>
<li>SORT命令的排序操作由快速排序算法实现。</li>
<li>SORT命令会根据用户是否使用了DESC选项来决定是使用升序对比还是降序对比来比较被排序的元素，升序对比会产生升序排序结果，被排序的元素按值的大小从小到大排列，降序对比会产生降序排序结果，被排序的元素按值的大小从大到小排列。</li>
<li>当SORT命令使用了BY选项时，命令使用其他键的值作为权重来进行排序操作。</li>
<li>当SORT命令使用了LIMIT选项时，命令只保留排序结果集中LIMIT选项指定的元素。</li>
<li>当SORT命令使用了GET选项时，命令会根据排序结果集中的元素，以及GET选项给定的模式，查找并返回其他键的值，而不是返回被排序的元素。</li>
<li>当SORT命令使用了STORE选项时，命令会将排序结果集保存在指定的键里面。</li>
<li>当SORT命令同时使用多个选项时，命令先执行排序</li>
</ul>
<h2 id="5-二进制位数组"><a href="#5-二进制位数组" class="headerlink" title="5.二进制位数组"></a>5.二进制位数组</h2><ul>
<li>Redis使用SDS来保存位数组。</li>
<li>SDS使用逆序来保存位数组，这种保存顺序简化了SETBIT命令的实现，使得SETBIT命令可以在不移动现有二进制位的情况下，对位数组进行空间扩展。</li>
<li>BITCOUNT命令使用了查表算法和variable-precision SWAR算法来优化命令的执行效率。</li>
<li>BITOP命令的所有操作都使用C语言内置的位操作来实现。</li>
</ul>
<h2 id="6-慢查询日志"><a href="#6-慢查询日志" class="headerlink" title="6.慢查询日志"></a>6.慢查询日志</h2><ul>
<li>Redis的慢查询日志功能用于记录执行时间超过指定时长的命令。<ul>
<li>slowlog get</li>
</ul>
</li>
<li>Redis服务器将所有的慢查询日志保存在服务器状态的slowlog链表中，每个链表节点都包含一个slowlogEntry结构，每个slowlogEntry结构代表一条慢查询日志。</li>
<li>打印和删除慢查询日志可以通过遍历slowlog链表来完成。</li>
<li>slowlog链表的长度就是服务器所保存慢查询日志的数量。</li>
<li>新的慢查询日志会被添加到slowlog链表的表头，如果日志的数量超过slowlog-max-len选项的值，那么多出来的日志会被删除。</li>
</ul>
<h2 id="7-监视器"><a href="#7-监视器" class="headerlink" title="7.监视器"></a>7.监视器</h2><ul>
<li>客户端可以通过执行MONITOR命令，将客户端转换成监视器，接收并打印服务器处理的每个命令请求的相关信息。</li>
<li>当一个客户端从普通客户端变为监视器时，该客户端的REDIS_MONITOR标识会被打开。</li>
<li>服务器将所有监视器都记录在monitors链表中。</li>
<li>每次处理命令请求时，服务器都会遍历monitors链表，将相关信息发送给监视器。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ricky</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"shdvgj","repo":"shdvgj.github.io","client_id":"e1ed5420cf72d3747b1b","client_secret":"6c71276732dc19402ae304d000c471a4df889cd5","admin_user":"shdvgj","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"d1546d731a9f30cc80127d57142a482b"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
